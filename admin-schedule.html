<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º | –ü–µ—Ä–≤—ã–π —Ä–∏—Ç–º –õ–µ–Ω–∏–Ω—Å–∫–æ–≥–æ</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÖ</text></svg>">
    
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --admin-primary: #3498db;
            --admin-secondary: #2c3e50;
            --admin-success: #27ae60;
            --admin-danger: #e74c3c;
            --admin-warning: #f39c12;
            --text: #1A1A1A;
            --text-light: #666;
            --border: #E5E7EB;
            --bg: #f8f9fa;
            --bg-light: #ffffff;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 16px rgba(0,0,0,0.15);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            -webkit-font-smoothing: antialiased;
            padding: 20px;
            min-height: 100vh;
        }
        
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-light);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .admin-header {
            background: var(--admin-secondary);
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--admin-primary);
        }
        
        .admin-header h1 {
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--admin-primary);
            color: white;
            text-decoration: none;
            border-radius: var(--radius);
            font-weight: 600;
            transition: var(--transition);
        }
        
        .back-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .admin-content {
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }
        
        @media (max-width: 1200px) {
            .admin-content {
                grid-template-columns: 1fr;
            }
        }
        
        .schedule-section {
            background: var(--bg-light);
            border-radius: var(--radius);
            padding: 1.5rem;
        }
        
        .schedule-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--admin-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .schedule-grid-container {
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 2rem;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .schedule-grid {
            display: grid;
            grid-template-columns: 80px repeat(7, 1fr);
            background: var(--bg-light);
        }
        
        .day-header {
            background: var(--admin-primary);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            border-right: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .day-header:first-child {
            background: var(--admin-secondary);
        }
        
        .time-slot {
            padding: 8px;
            background: #f8f9fa;
            border-right: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            font-size: 12px;
            color: var(--text-light);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .day-cell {
            padding: 2px;
            border-right: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            min-height: 30px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .day-cell:hover {
            background-color: #e8f4fc;
        }
        
        .day-cell.empty {
            background: repeating-linear-gradient(
                45deg,
                #f8f9fa,
                #f8f9fa 10px,
                #e9ecef 10px,
                #e9ecef 20px
            );
        }
        
        .schedule-event {
            position: absolute;
            left: 1px;
            right: 1px;
            padding: 4px;
            border-radius: 4px;
            font-size: 10px;
            color: white;
            overflow: hidden;
            cursor: pointer;
            z-index: 1;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            transition: var(--transition);
        }
        
        .schedule-event:hover {
            transform: scale(1.02);
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            z-index: 2;
        }
        
        .schedule-event .event-title {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }
        
        .schedule-event .event-time {
            font-size: 9px;
            opacity: 0.9;
        }
        
        .control-section {
            background: var(--bg-light);
            border-radius: var(--radius);
            padding: 1.5rem;
        }
        
        .control-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--admin-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .btn-primary {
            background: var(--admin-primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .btn-success {
            background: var(--admin-success);
            color: white;
        }
        
        .btn-success:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .btn-danger {
            background: var(--admin-danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .events-list {
            margin-top: 2rem;
        }
        
        .events-list h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--admin-secondary);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--admin-primary);
        }
        
        .events-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1rem;
        }
        
        .event-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid var(--admin-primary);
            transition: var(--transition);
        }
        
        .event-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .event-info {
            flex: 1;
        }
        
        .event-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .event-details {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .event-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .edit-btn {
            color: var(--admin-primary);
        }
        
        .edit-btn:hover {
            background: rgba(52, 152, 219, 0.1);
        }
        
        .delete-btn {
            color: var(--admin-danger);
        }
        
        .delete-btn:hover {
            background: rgba(231, 76, 60, 0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: var(--bg-light);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-hover);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .modal-header h2 {
            margin: 0;
            color: var(--admin-secondary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            line-height: 1;
        }
        
        .modal-close:hover {
            color: var(--admin-danger);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--admin-secondary);
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 14px;
            transition: var(--transition);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--admin-primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        .directions-container {
            border: 1px solid var(--border);
            border-radius: var(--radius);
            max-height: 200px;
            overflow-y: auto;
            margin-top: 0.5rem;
        }
        
        .direction-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: #f8f9fa;
        }
        
        .direction-tab {
            padding: 10px 16px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .direction-tab:hover {
            color: var(--admin-primary);
        }
        
        .direction-tab.active {
            color: var(--admin-primary);
            border-bottom-color: var(--admin-primary);
            background: white;
        }
        
        .direction-list {
            padding: 1rem;
        }
        
        .direction-option {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 4px;
        }
        
        .direction-option:hover {
            background: #e8f4fc;
        }
        
        .direction-option.selected {
            background: var(--admin-primary);
            color: white;
        }
        
        .direction-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .direction-info {
            flex: 1;
        }
        
        .direction-name {
            font-weight: 500;
            font-size: 14px;
        }
        
        .direction-age {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .quick-fill {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .quick-btn {
            padding: 8px;
            background: #e9ecef;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 12px;
            text-align: center;
            transition: var(--transition);
        }
        
        .quick-btn:hover {
            background: var(--admin-primary);
            color: white;
            border-color: var(--admin-primary);
        }
        
        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            margin-top: 8px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--admin-primary);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: var(--radius);
            color: white;
            font-weight: 600;
            z-index: 1001;
            animation: slideIn 0.3s ease;
            box-shadow: var(--shadow-hover);
        }
        
        .notification.success {
            background: var(--admin-success);
        }
        
        .notification.error {
            background: var(--admin-danger);
        }
        
        .notification.info {
            background: var(--admin-primary);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .admin-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                padding: 1rem;
            }
            
            .admin-content {
                padding: 1rem;
            }
            
            .schedule-grid {
                grid-template-columns: 60px repeat(7, 1fr);
                font-size: 11px;
            }
            
            .day-header {
                padding: 8px;
                font-size: 12px;
            }
            
            .time-slot {
                padding: 6px;
                font-size: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 1.5rem;
            }
            
            .quick-fill {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .direction-tabs {
                overflow-x: auto;
            }
        }
        
        @media (max-width: 480px) {
            .schedule-grid {
                grid-template-columns: 50px repeat(7, 1fr);
            }
            
            .day-header {
                font-size: 10px;
                padding: 6px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .github-status {
            font-size: 12px;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            margin-left: 12px;
            font-weight: normal;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .btn-github {
            background: #6f42c1;
            color: white;
            margin-top: 8px;
        }

        .btn-github:hover {
            background: #5a32a3;
        }

        .publish-success {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: #27ae60;
            color: white;
            border-radius: 8px;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <h1>
                üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
                <span style="font-size: 1rem; opacity: 0.9; font-weight: normal;">| –ü–µ—Ä–≤—ã–π —Ä–∏—Ç–º –õ–µ–Ω–∏–Ω—Å–∫–æ–≥–æ</span>
                <span id="githubStatus" class="github-status">üì¶ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</span>
            </h1>
            <a href="index.html" class="back-btn">
                ‚Üê –ù–∞ —Å–∞–π—Ç
            </a>
        </header>
        
        <main class="admin-content">
            <section class="schedule-section">
                <h2>üìã –°–µ—Ç–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalEvents">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–Ω—è—Ç–∏–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayEvents">0</div>
                        <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
                
                <div class="schedule-grid-container">
                    <div class="schedule-grid" id="scheduleGrid"></div>
                </div>
                
                <p style="color: var(--text-light); font-size: 0.875rem; margin-top: 1rem;">
                    üí° –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —è—á–µ–π–∫—É –≤ —Å–µ—Ç–∫–µ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ –≤ —ç—Ç–æ –≤—Ä–µ–º—è
                </p>
            </section>
            
            <section class="control-section">
                <h2>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="openEventModal()">
                        Ôºã –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ
                    </button>
                    <button class="btn btn-success" onclick="exportSchedule()">
                        üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
                    </button>
                    <button class="btn btn-danger" onclick="clearAllEvents()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                    </button>
                    <button class="btn btn-github" id="publishBtn" onclick="publishToGitHub(scheduleEvents)">
                        üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                        <span style="font-size: 11px; opacity: 0.9; margin-left: 6px;">GitHub</span>
                    </button>
                </div>
                
                <div class="events-list">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –∑–∞–Ω—è—Ç–∏–π</h3>
                    <div class="events-container" id="eventsContainer"></div>
                </div>
            </section>
        </main>
    </div>
    
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</h2>
                <button class="modal-close" onclick="closeEventModal()">√ó</button>
            </div>
            
            <form id="eventForm" onsubmit="submitEventForm(event)">
                <div class="form-group">
                    <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                    <div class="directions-container">
                        <div class="direction-tabs" id="directionTabs"></div>
                        <div class="direction-list" id="directionList"></div>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-light);">
                        –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:
                    </div>
                    <input type="text" class="form-control" id="eventTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ *</label>
                        <select class="form-control" id="eventDay" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å</option>
                            <option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                            <option value="2">–í—Ç–æ—Ä–Ω–∏–∫</option>
                            <option value="3">–°—Ä–µ–¥–∞</option>
                            <option value="4">–ß–µ—Ç–≤–µ—Ä–≥</option>
                            <option value="5">–ü—è—Ç–Ω–∏—Ü–∞</option>
                            <option value="6">–°—É–±–±–æ—Ç–∞</option>
                            <option value="7">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–¶–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                        <select class="form-control" id="eventColor">
                            <option value="#3498db">–°–∏–Ω–∏–π (—Ç–∞–Ω—Ü—ã)</option>
                            <option value="#2ecc71">–ó–µ–ª–µ–Ω—ã–π (—Ñ–∏—Ç–Ω–µ—Å)</option>
                            <option value="#e74c3c">–ö—Ä–∞—Å–Ω—ã–π (–∏–Ω—Ç–µ–Ω—Å–∏–≤)</option>
                            <option value="#f39c12">–û—Ä–∞–Ω–∂–µ–≤—ã–π (–¥–µ—Ç–∏)</option>
                            <option value="#9b59b6">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π (–≤–∑—Ä–æ—Å–ª—ã–µ)</option>
                            <option value="#1abc9c">–ë–∏—Ä—é–∑–æ–≤—ã–π (–±–∞–ª–µ—Ç)</option>
                            <option value="#e67e22">–ú–æ—Ä–∫–æ–≤–Ω—ã–π (—Ö–∏–ø-—Ö–æ–ø)</option>
                        </select>
                        <div class="color-preview" id="colorPreview"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ *</label>
                        <input type="time" class="form-control" id="eventStartTime" min="07:00" max="22:00" step="300" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è *</label>
                        <input type="time" class="form-control" id="eventEndTime" min="07:00" max="22:00" step="300" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</label>
                    <div class="quick-fill">
                        <div class="quick-btn" data-minutes="30">30 –º–∏–Ω</div>
                        <div class="quick-btn" data-minutes="45">45 –º–∏–Ω</div>
                        <div class="quick-btn" data-minutes="60">1 —á–∞—Å</div>
                        <div class="quick-btn" data-minutes="90">1.5 —á–∞—Å–∞</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</label>
                        <input type="text" class="form-control" id="eventInstructor" placeholder="–ò–º—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞</label>
                        <select class="form-control" id="eventAgeGroup">
                            <option value="">–ê–≤—Ç–æ –∏–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
                            <option value="3-7 –ª–µ—Ç">3-7 –ª–µ—Ç (–ú–∞–ª—ã—à–∏)</option>
                            <option value="8-12 –ª–µ—Ç">8-12 –ª–µ—Ç (–î–µ—Ç–∏)</option>
                            <option value="13-17 –ª–µ—Ç">13-17 –ª–µ—Ç (–ü–æ–¥—Ä–æ—Å—Ç–∫–∏)</option>
                            <option value="18-44 –ª–µ—Ç">18-44 –ª–µ—Ç (–í–∑—Ä–æ—Å–ª—ã–µ)</option>
                            <option value="45+ –ª–µ—Ç">45+ –ª–µ—Ç (–í–∑—Ä–æ—Å–ª—ã–µ 45+)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è</label>
                    <textarea class="form-control" id="eventDescription" rows="2" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label>
                    <input type="number" class="form-control" id="eventMaxParticipants" min="1" max="50" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 15">
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)</label>
                    <div class="quick-fill">
                        <div class="quick-btn" data-price="350">350 (–ø—Ä–æ–±–Ω–æ–µ)</div>
                        <div class="quick-btn" data-price="3000">3000 (–∞–±–æ–Ω–µ–º–µ–Ω—Ç)</div>
                        <div class="quick-btn" data-price="4000">4000 (–≤–∑—Ä–æ—Å–ª—ã–π)</div>
                        <input type="number" class="form-control" id="eventPrice" placeholder="–∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é —Ü–µ–Ω—É" style="grid-column: 1 / -1; margin-top: 0.5rem;">
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteBtn" style="display: none;" onclick="deleteCurrentEvent()">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                    <div style="display: flex; gap: 1rem;">
                        <button type="button" class="btn" onclick="closeEventModal()" style="background: #95a5a6; color: white;">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ===== –ë–ê–ó–ê –î–ê–ù–ù–´–• –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ô =====
        const DIRECTIONS_DATABASE = {
            'baby': [
                {
                    id: 'baby-dance',
                    name: '–¢–∞–Ω–µ—Ü-–∏–≥—Ä–∞ / –†–∏—Ç–º–∏–∫–∞',
                    icon: 'üéµ',
                    age: '3-7 –ª–µ—Ç',
                    description: '–†–∞–∑–≤–∏—Ç–∏–µ —á—É–≤—Å—Ç–≤–∞ —Ä–∏—Ç–º–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏',
                    defaultDuration: 45,
                    color: '#f39c12',
                    price: 350
                },
                {
                    id: 'baby-classic',
                    name: '–ê–∑–±—É–∫–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ç–∞–Ω—Ü–∞',
                    icon: 'ü©∞',
                    age: '3-7 –ª–µ—Ç',
                    description: '–û—Å–Ω–æ–≤—ã –±–∞–ª–µ—Ç–∞ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ',
                    defaultDuration: 45,
                    color: '#9b59b6',
                    price: 350
                },
                {
                    id: 'baby-mult',
                    name: '–ë–µ–±–∏-–º—É–ª—å—Ç-–¥–µ–Ω—Å',
                    icon: 'üì∫',
                    age: '3-7 –ª–µ—Ç',
                    description: '–¢–∞–Ω—Ü—ã –ø–æ–¥ –¥–µ—Ç—Å–∫–∏–µ –ø–µ—Å–Ω–∏',
                    defaultDuration: 45,
                    color: '#3498db',
                    price: 350
                }
            ],
            'kids': [
                {
                    id: 'kids-classic',
                    name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è',
                    icon: 'üåü',
                    age: '8-12 –ª–µ—Ç',
                    description: '–£–≥–ª—É–±–ª–µ–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –±–∞–ª–µ—Ç–∞',
                    defaultDuration: 60,
                    color: '#9b59b6',
                    price: 3000
                },
                {
                    id: 'kids-modern',
                    name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü',
                    icon: 'üî•',
                    age: '8-12 –ª–µ—Ç',
                    description: '–•–∏–ø-—Ö–æ–ø, –¥–∂–∞–∑-–º–æ–¥–µ—Ä–Ω',
                    defaultDuration: 60,
                    color: '#e74c3c',
                    price: 3000
                },
                {
                    id: 'kids-estrade',
                    name: '–≠—Å—Ç—Ä–∞–¥–Ω—ã–π —Ç–∞–Ω–µ—Ü',
                    icon: 'üé≠',
                    age: '8-12 –ª–µ—Ç',
                    description: '–Ø—Ä–∫–∏–µ —Å—Ü–µ–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏',
                    defaultDuration: 60,
                    color: '#f39c12',
                    price: 3000
                }
            ],
            'teens': [
                {
                    id: 'teens-contemporary',
                    name: 'Contemporary',
                    icon: 'üíß',
                    age: '13-17 –ª–µ—Ç',
                    description: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è',
                    defaultDuration: 90,
                    color: '#3498db',
                    price: 3000
                },
                {
                    id: 'teens-hiphop-old',
                    name: '–•–∏–ø-—Ö–æ–ø (Old School)',
                    icon: 'üëü',
                    age: '13-17 –ª–µ—Ç',
                    description: 'Breaking, Popping, Locking',
                    defaultDuration: 90,
                    color: '#2c3e50',
                    price: 3000
                },
                {
                    id: 'teens-hiphop-new',
                    name: '–•–∏–ø-—Ö–æ–ø (New Style)',
                    icon: 'üéß',
                    age: '13-17 –ª–µ—Ç',
                    description: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–ª–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏',
                    defaultDuration: 90,
                    color: '#e74c3c',
                    price: 3000
                }
            ],
            'adult': [
                {
                    id: 'adult-contemporary',
                    name: 'Contemporary –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö',
                    icon: 'üßò',
                    age: '18-44 –ª–µ—Ç',
                    description: '–¢–∞–Ω–µ—Ü –¥–ª—è –¥—É—à–∏ –∏ —Ñ–æ—Ä–º—ã',
                    defaultDuration: 90,
                    color: '#3498db',
                    price: 4000
                },
                {
                    id: 'adult-hiphop',
                    name: '–•–∏–ø-—Ö–æ–ø –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö',
                    icon: 'üí™',
                    age: '18-44 –ª–µ—Ç',
                    description: '–î–∏–Ω–∞–º–∏—á–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è',
                    defaultDuration: 90,
                    color: '#e74c3c',
                    price: 4000
                },
                {
                    id: 'adult-heels',
                    name: 'High Heels / Lady Dance',
                    icon: 'üë†',
                    age: '18-44 –ª–µ—Ç',
                    description: '–ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü –Ω–∞ –∫–∞–±–ª—É–∫–∞—Ö',
                    defaultDuration: 90,
                    color: '#9b59b6',
                    price: 4000
                }
            ],
            'adult25': [
                {
                    id: 'adult25-lady',
                    name: 'Lady Dance, High Heels',
                    icon: 'üíÉ',
                    age: '25+ –ª–µ—Ç',
                    description: '–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π —Ç–∞–Ω–µ—Ü',
                    defaultDuration: 90,
                    color: '#9b59b6',
                    price: 4000
                },
                {
                    id: 'adult25-contemporary',
                    name: 'Contemporary, Modern Dance',
                    icon: 'üåø',
                    age: '25+ –ª–µ—Ç',
                    description: '–ì–∞—Ä–º–æ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞',
                    defaultDuration: 90,
                    color: '#27ae60',
                    price: 4000
                },
                {
                    id: 'adult25-ballet',
                    name: 'Body Ballet –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö',
                    icon: 'ü©∞',
                    age: '25+ –ª–µ—Ç',
                    description: '–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–∞–ª–µ—Ç',
                    defaultDuration: 90,
                    color: '#3498db',
                    price: 4000
                }
            ],
            'adult45': [
                {
                    id: 'adult45-lady',
                    name: 'Lady Dance 45+',
                    icon: 'üå∫',
                    age: '45+ –ª–µ—Ç',
                    description: '–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Ç–∞–Ω–µ—Ü –¥–ª—è –∂–µ–Ω—â–∏–Ω',
                    defaultDuration: 60,
                    color: '#9b59b6',
                    price: 4000
                },
                {
                    id: 'adult45-ballet',
                    name: 'Body Ballet 45+',
                    icon: 'üåü',
                    age: '45+ –ª–µ—Ç',
                    description: '–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∞–ª–µ—Ç',
                    defaultDuration: 60,
                    color: '#3498db',
                    price: 4000
                },
                {
                    id: 'adult45-ballroom',
                    name: '–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∞–Ω—Ü—ã',
                    icon: 'üíÉ',
                    age: '45+ –ª–µ—Ç',
                    description: '–¢–∞–Ω—Ü—ã –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
                    defaultDuration: 60,
                    color: '#f39c12',
                    price: 4000
                }
            ]
        };
        
        const AGE_GROUPS = [
            { id: 'baby', name: '–ú–∞–ª—ã—à–∏ (3-7 –ª–µ—Ç)' },
            { id: 'kids', name: '–î–µ—Ç–∏ (8-12 –ª–µ—Ç)' },
            { id: 'teens', name: '–ü–æ–¥—Ä–æ—Å—Ç–∫–∏ (13-17 –ª–µ—Ç)' },
            { id: 'adult', name: '–í–∑—Ä–æ—Å–ª—ã–µ (18-44 –ª–µ—Ç)' },
            { id: 'adult25', name: '–í–∑—Ä–æ—Å–ª—ã–µ 25+' },
            { id: 'adult45', name: '–í–∑—Ä–æ—Å–ª—ã–µ 45+' }
        ];
        
        // ===== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        let scheduleEvents = [];
        let editingEventId = null;
        let currentSelectedDay = 1;
        let currentSelectedTime = 9.0;
        let selectedDirection = null;
        
        const dayNames = {
            1: '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
            2: '–í—Ç–æ—Ä–Ω–∏–∫',
            3: '–°—Ä–µ–¥–∞',
            4: '–ß–µ—Ç–≤–µ—Ä–≥',
            5: '–ü—è—Ç–Ω–∏—Ü–∞',
            6: '–°—É–±–±–æ—Ç–∞',
            7: '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'
        };
        
        const dayShortNames = {
            1: '–ü–Ω',
            2: '–í—Ç',
            3: '–°—Ä',
            4: '–ß—Ç',
            5: '–ü—Ç',
            6: '–°–±',
            7: '–í—Å'
        };

        // ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø GITHUB =====
        // ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï '–≤–∞—à-–ª–æ–≥–∏–Ω' –ù–ê –í–ê–® –†–ï–ê–õ–¨–ù–´–ô –õ–û–ì–ò–ù GITHUB
        const GITHUB_CONFIG = {
            owner: 'egor0294.github.io',
            repo: 'dance-schedule',
            branch: 'main',
            filePath: 'schedule.json'
        };
        
        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        document.addEventListener('DOMContentLoaded', function() {
            initAdmin();
            loadScheduleFromStorage();
            createScheduleGrid();
            renderEventsList();
            updateStats();
            renderDirectionTabs();
            selectAgeGroup('baby');
            addGitHubStatus();
        });
        
        function initAdmin() {
            const eventForm = document.getElementById('eventForm');
            if (eventForm) {
                eventForm.addEventListener('submit', submitEventForm);
            }
            
            const colorSelect = document.getElementById('eventColor');
            const colorPreview = document.getElementById('colorPreview');
            
            colorSelect.addEventListener('change', function() {
                colorPreview.style.backgroundColor = this.value;
            });
            
            colorPreview.style.backgroundColor = colorSelect.value;
            
            document.getElementById('eventStartTime').value = '09:00';
            document.getElementById('eventEndTime').value = '10:00';
            
            document.querySelectorAll('.quick-btn[data-minutes]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const minutes = parseInt(this.dataset.minutes);
                    setEventDuration(minutes);
                });
            });
            
            document.querySelectorAll('.quick-btn[data-price]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const price = parseInt(this.dataset.price);
                    document.getElementById('eventPrice').value = price;
                });
            });
            
            document.getElementById('eventStartTime').addEventListener('change', function() {
                updateEndTimeBasedOnDuration(60);
            });
            
            document.getElementById('eventTitle').addEventListener('input', function() {
                if (this.value.trim() && selectedDirection) {
                    selectedDirection = null;
                    clearDirectionSelection();
                }
            });
        }

        function addGitHubStatus() {
            const statusSpan = document.getElementById('githubStatus');
            if (statusSpan) {
                statusSpan.innerHTML = `üì¶ GitHub: ${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}`;
            }
        }
        
        // ===== –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –í GITHUB =====
        async function publishToGitHub(scheduleData) {
            const publishBtn = document.getElementById('publishBtn');
            const originalText = publishBtn.innerHTML;
            
            try {
                publishBtn.disabled = true;
                publishBtn.innerHTML = '‚è≥ –ü—É–±–ª–∏–∫–∞—Ü–∏—è...';
                
                showNotification('–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π...', 'info');
                
                const jsonContent = JSON.stringify(scheduleData, null, 2);
                const content = btoa(unescape(encodeURIComponent(jsonContent)));
                
                let sha = null;
                try {
                    const getResponse = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.filePath}`, {
                        headers: {
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (getResponse.ok) {
                        const fileData = await getResponse.json();
                        sha = fileData.sha;
                    }
                } catch (e) {
                    console.log('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π');
                }
                
                const commitData = {
                    message: `–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ${new Date().toLocaleString('ru-RU')}`,
                    content: content,
                    branch: GITHUB_CONFIG.branch
                };
                
                if (sha) {
                    commitData.sha = sha;
                }
                
                const response = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.filePath}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify(commitData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showNotification('‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏!', 'success');
                    
                    localStorage.setItem('lastPublishTime', Date.now().toString());
                    
                    showPublishSuccess(result.content.html_url);
                    return true;
                } else {
                    const error = await response.json();
                    throw new Error(error.message || '–û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏');
                }
                
            } catch (error) {
                console.error('GitHub publish error:', error);
                showNotification(`‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: ${error.message}`, 'error');
                
                if (confirm('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏?')) {
                    downloadScheduleJSON(scheduleData);
                }
                
                return false;
            } finally {
                publishBtn.disabled = false;
                publishBtn.innerHTML = originalText;
            }
        }

        function downloadScheduleJSON(scheduleData) {
            const jsonContent = JSON.stringify(scheduleData, null, 2);
            const blob = new Blob([jsonContent], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `schedule_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            showNotification('–§–∞–π–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–∫–∞—á–∞–Ω', 'success');
        }

        function showPublishSuccess(repoUrl) {
            const notification = document.createElement('div');
            notification.className = 'publish-success';
            notification.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <div style="font-size: 24px;">‚úÖ</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 8px;">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ!</div>
                        <div style="font-size: 13px; margin-bottom: 12px; opacity: 0.9;">
                            –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 1-5 –º–∏–Ω—É—Ç
                        </div>
                        <a href="${repoUrl}" target="_blank" style="
                            display: inline-block;
                            padding: 6px 12px;
                            background: rgba(255,255,255,0.2);
                            color: white;
                            text-decoration: none;
                            border-radius: 4px;
                            font-size: 12px;
                            border: 1px solid rgba(255,255,255,0.3);
                        ">
                            üì¶ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
                        </a>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="
                        background: none;
                        border: none;
                        color: white;
                        font-size: 20px;
                        cursor: pointer;
                        padding: 0;
                        opacity: 0.7;
                    ">√ó</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 10000);
        }
        
        // ===== –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ô =====
        function renderDirectionTabs() {
            const tabsContainer = document.getElementById('directionTabs');
            tabsContainer.innerHTML = AGE_GROUPS.map(group => `
                <button type="button" class="direction-tab ${group.id === 'baby' ? 'active' : ''}" 
                        onclick="selectAgeGroup('${group.id}')">
                    ${group.name}
                </button>
            `).join('');
        }
        
        function selectAgeGroup(groupId) {
            document.querySelectorAll('.direction-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.textContent.includes(AGE_GROUPS.find(g => g.id === groupId).name)) {
                    tab.classList.add('active');
                }
            });
            
            const directions = DIRECTIONS_DATABASE[groupId] || [];
            const listContainer = document.getElementById('directionList');
            
            if (directions.length === 0) {
                listContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-light);">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">üé≠</div>
                        <p>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —ç—Ç–æ–π –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    </div>
                `;
                return;
            }
            
            listContainer.innerHTML = directions.map(dir => `
                <div class="direction-option" onclick="selectDirection('${groupId}', '${dir.id}')">
                    <div class="direction-icon" style="background: ${dir.color}; color: white;">
                        ${dir.icon}
                    </div>
                    <div class="direction-info">
                        <div class="direction-name">${dir.name}</div>
                        <div class="direction-age">${dir.age} ‚Ä¢ ${dir.defaultDuration} –º–∏–Ω</div>
                    </div>
                </div>
            `).join('');
            
            if (selectedDirection && selectedDirection.groupId === groupId) {
                const option = document.querySelector(`.direction-option[onclick*="${selectedDirection.dirId}"]`);
                if (option) {
                    option.classList.add('selected');
                }
            }
        }
        
        function selectDirection(groupId, dirId) {
            const direction = DIRECTIONS_DATABASE[groupId].find(d => d.id === dirId);
            if (!direction) return;
            
            selectedDirection = {
                groupId,
                dirId,
                ...direction
            };
            
            clearDirectionSelection();
            
            const option = document.querySelector(`.direction-option[onclick*="${dirId}"]`);
            if (option) {
                option.classList.add('selected');
            }
            
            document.getElementById('eventTitle').value = direction.name;
            document.getElementById('eventColor').value = direction.color;
            document.getElementById('colorPreview').style.backgroundColor = direction.color;
            document.getElementById('eventAgeGroup').value = direction.age;
            document.getElementById('eventPrice').value = direction.price;
            
            setEventDuration(direction.defaultDuration);
            
            if (direction.description) {
                document.getElementById('eventDescription').value = direction.description;
            }
        }
        
        function clearDirectionSelection() {
            document.querySelectorAll('.direction-option').forEach(option => {
                option.classList.remove('selected');
            });
        }
        
        // ===== –°–û–ó–î–ê–ù–ò–ï –°–ï–¢–ö–ò –†–ê–°–ü–ò–°–ê–ù–ò–Ø =====
        function createScheduleGrid() {
            const grid = document.getElementById('scheduleGrid');
            grid.innerHTML = '';
            
            grid.innerHTML += `<div class="day-header" style="border-right: 1px solid rgba(255,255,255,0.3);">–í—Ä–µ–º—è</div>`;
            for (let i = 1; i <= 7; i++) {
                grid.innerHTML += `<div class="day-header">${dayShortNames[i]}</div>`;
            }
            
            for (let hour = 7; hour <= 22; hour++) {
                for (let minute = 0; minute < 60; minute += 30) {
                    if (hour === 22 && minute > 0) continue;
                    
                    const time = minute === 0 ? `${hour}:00` : `${hour}:30`;
                    const timeDecimal = hour + minute/60;
                    
                    grid.innerHTML += `<div class="time-slot">${time}</div>`;
                    
                    for (let day = 1; day <= 7; day++) {
                        grid.innerHTML += `
                            <div class="day-cell" 
                                 data-day="${day}" 
                                 data-time="${timeDecimal}"
                                 onclick="openEventModalForSlot(${day}, ${timeDecimal})"
                                 title="${dayNames[day]}, ${time}">
                            </div>
                        `;
                    }
                }
            }
            
            renderScheduleEvents();
        }
        
        function renderScheduleEvents() {
            document.querySelectorAll('.schedule-event').forEach(el => el.remove());
            
            document.querySelectorAll('.day-cell').forEach(cell => {
                cell.classList.remove('empty');
                
                const day = parseInt(cell.dataset.day);
                const time = parseFloat(cell.dataset.time);
                
                const hasEvent = scheduleEvents.some(event => 
                    event.day === day && 
                    time >= event.startTime && 
                    time < event.endTime
                );
                
                if (!hasEvent) {
                    cell.classList.add('empty');
                }
            });
            
            scheduleEvents.forEach(event => {
                const { id, title, day, startTime, endTime, color } = event;
                
                const dayCells = document.querySelectorAll(`.day-cell[data-day="${day}"]`);
                const cellTimes = Array.from(dayCells).map(cell => parseFloat(cell.dataset.time));
                
                let startIndex = -1;
                let endIndex = -1;
                
                cellTimes.forEach((time, index) => {
                    if (startIndex === -1 && time >= startTime) {
                        startIndex = index;
                    }
                    if (time < endTime) {
                        endIndex = index;
                    }
                });
                
                if (startIndex === -1 || endIndex === -1) return;
                
                const startCell = dayCells[startIndex];
                const startCellTime = cellTimes[startIndex];
                
                const slotsCount = endIndex - startIndex + 1;
                const cellHeight = 30;
                const totalMinutes = (endTime - startTime) * 60;
                const startMinutesOffset = (startTime - startCellTime) * 60;
                
                const topOffset = (startMinutesOffset / 30) * cellHeight;
                const height = (totalMinutes / 30) * cellHeight;
                
                const eventEl = document.createElement('div');
                eventEl.className = 'schedule-event';
                eventEl.style.backgroundColor = color;
                eventEl.style.top = `${topOffset}px`;
                eventEl.style.height = `${height}px`;
                
                const eventStart = decimalToTime(startTime);
                const eventEnd = decimalToTime(endTime);
                
                eventEl.innerHTML = `
                    <div class="event-title">${title}</div>
                    <div class="event-time">${eventStart.substring(0, 5)}</div>
                `;
                
                eventEl.title = `${title}\n${eventStart} - ${eventEnd}\n${event.instructor || '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∑–∞–Ω'}`;
                
                eventEl.onclick = (e) => {
                    e.stopPropagation();
                    editEvent(id);
                };
                
                startCell.appendChild(eventEl);
            });
        }
        
        // ===== –†–ï–ù–î–ï–†–ò–ù–ì –°–ü–ò–°–ö–ê –°–û–ë–´–¢–ò–ô =====
        function renderEventsList() {
            const container = document.getElementById('eventsContainer');
            
            if (scheduleEvents.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem 1.5rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
                        <h3 style="margin-bottom: 0.5rem;">–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π</h3>
                        <p style="color: var(--text-light);">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ, –∫–ª–∏–∫–Ω—É–≤ –Ω–∞ —è—á–µ–π–∫—É –≤ —Å–µ—Ç–∫–µ</p>
                    </div>
                `;
                return;
            }
            
            const sortedEvents = [...scheduleEvents].sort((a, b) => {
                if (a.day !== b.day) return a.day - b.day;
                return a.startTime - b.startTime;
            });
            
            let html = '';
            
            sortedEvents.forEach(event => {
                const dayName = dayNames[event.day];
                const startTime = decimalToTime(event.startTime);
                const endTime = decimalToTime(event.endTime);
                const duration = Math.round((event.endTime - event.startTime) * 60);
                
                let directionIcon = 'üéØ';
                
                Object.values(DIRECTIONS_DATABASE).forEach(group => {
                    const found = group.find(dir => dir.name === event.title);
                    if (found) {
                        directionIcon = found.icon;
                    }
                });
                
                html += `
                    <div class="event-item">
                        <div class="event-info">
                            <div class="event-title">
                                <span style="margin-right: 8px;">${directionIcon}</span>
                                ${event.title}
                            </div>
                            <div class="event-details">
                                ${dayName}, ${startTime.substring(0, 5)}-${endTime.substring(0, 5)} (${duration} –º–∏–Ω)
                                ${event.instructor ? ` ‚Ä¢ ${event.instructor}` : ''}
                                ${event.price ? ` ‚Ä¢ ${event.price}‚ÇΩ` : ''}
                            </div>
                        </div>
                        <div class="event-actions">
                            <button class="action-btn edit-btn" onclick="editEvent(${event.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                ‚úèÔ∏è
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteEvent(${event.id})" title="–£–¥–∞–ª–∏—Ç—å">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –°–û–ë–´–¢–ò–Ø–ú–ò =====
        function openEventModalForSlot(day, time) {
            currentSelectedDay = day;
            currentSelectedTime = time;
            
            document.getElementById('eventForm').reset();
            document.getElementById('eventDay').value = day;
            document.getElementById('eventStartTime').value = decimalToTime(time);
            
            const endTime = decimalToTime(time + 1);
            if (time + 1 <= 22) {
                document.getElementById('eventEndTime').value = endTime;
            } else {
                document.getElementById('eventEndTime').value = '22:00';
            }
            
            document.getElementById('eventColor').value = '#3498db';
            document.getElementById('colorPreview').style.backgroundColor = '#3498db';
            
            selectedDirection = null;
            clearDirectionSelection();
            
            document.getElementById('deleteBtn').style.display = 'none';
            document.getElementById('modalTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ';
            editingEventId = null;
            
            openEventModal();
        }
        
        function openEventModal() {
            document.getElementById('eventModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            document.getElementById('eventTitle').focus();
        }
        
        function closeEventModal() {
            document.getElementById('eventModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            editingEventId = null;
            selectedDirection = null;
            clearDirectionSelection();
        }
        
        function editEvent(eventId) {
            const event = scheduleEvents.find(e => e.id === eventId);
            if (!event) return;
            
            editingEventId = eventId;
            
            selectedDirection = null;
            clearDirectionSelection();
            
            let foundDirection = null;
            Object.entries(DIRECTIONS_DATABASE).forEach(([groupId, directions]) => {
                const dir = directions.find(d => d.name === event.title);
                if (dir) {
                    foundDirection = { groupId, dirId: dir.id, ...dir };
                }
            });
            
            document.getElementById('eventTitle').value = event.title;
            document.getElementById('eventDay').value = event.day;
            document.getElementById('eventColor').value = event.color;
            document.getElementById('colorPreview').style.backgroundColor = event.color;
            document.getElementById('eventStartTime').value = decimalToTime(event.startTime);
            document.getElementById('eventEndTime').value = decimalToTime(event.endTime);
            document.getElementById('eventInstructor').value = event.instructor || '';
            document.getElementById('eventAgeGroup').value = event.ageGroup || '';
            document.getElementById('eventDescription').value = event.description || '';
            document.getElementById('eventMaxParticipants').value = event.maxParticipants || '';
            document.getElementById('eventPrice').value = event.price || '';
            
            if (foundDirection) {
                selectedDirection = foundDirection;
                selectAgeGroup(foundDirection.groupId);
                
                setTimeout(() => {
                    const option = document.querySelector(`.direction-option[onclick*="${foundDirection.dirId}"]`);
                    if (option) {
                        option.classList.add('selected');
                    }
                }, 100);
            }
            
            document.getElementById('deleteBtn').style.display = 'block';
            document.getElementById('modalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–Ω—è—Ç–∏–µ';
            
            openEventModal();
        }
        
        function submitEventForm(e) {
            e.preventDefault();
            
            const title = document.getElementById('eventTitle').value.trim();
            const day = parseInt(document.getElementById('eventDay').value);
            const color = document.getElementById('eventColor').value;
            const startTime = timeToDecimal(document.getElementById('eventStartTime').value);
            const endTime = timeToDecimal(document.getElementById('eventEndTime').value);
            const instructor = document.getElementById('eventInstructor').value.trim();
            const ageGroup = document.getElementById('eventAgeGroup').value;
            const description = document.getElementById('eventDescription').value.trim();
            const maxParticipants = document.getElementById('eventMaxParticipants').value;
            const price = document.getElementById('eventPrice').value;
            
            if (!title) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è', 'error');
                return;
            }
            
            if (endTime <= startTime) {
                showNotification('–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–∑–∂–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞', 'error');
                return;
            }
            
            if (startTime < 7 || endTime > 22) {
                showNotification('–ó–∞–Ω—è—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ —Å 7:00 –¥–æ 22:00', 'error');
                return;
            }
            
            const overlapping = scheduleEvents.filter(event => {
                if (editingEventId && event.id === editingEventId) return false;
                if (event.day !== day) return false;
                return (startTime < event.endTime && endTime > event.startTime);
            });
            
            if (overlapping.length > 0) {
                if (!confirm(`–≠—Ç–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å ${overlapping.length} –¥—Ä—É–≥–∏–º(–∏) –∑–∞–Ω—è—Ç–∏–µ–º(—è–º–∏). –í—Å–µ —Ä–∞–≤–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å?`)) {
                    return;
                }
            }
            
            const eventData = {
                title,
                day,
                startTime,
                endTime,
                color,
                instructor,
                ageGroup: ageGroup || (selectedDirection ? selectedDirection.age : ''),
                description,
                maxParticipants: maxParticipants ? parseInt(maxParticipants) : null,
                price: price ? parseInt(price) : null
            };
            
            if (editingEventId) {
                updateEvent(editingEventId, eventData);
                showNotification('–ó–∞–Ω—è—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ', 'success');
            } else {
                addEvent(eventData);
                showNotification('–ó–∞–Ω—è—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ', 'success');
            }
            
            closeEventModal();
        }
        
        function addEvent(eventData) {
            const newEvent = {
                id: Date.now(),
                ...eventData
            };
            
            scheduleEvents.push(newEvent);
            saveScheduleToStorage();
            renderScheduleEvents();
            renderEventsList();
            updateStats();
            
            if (confirm('‚úÖ –ó–∞–Ω—è—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ! –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ —Å–µ–π—á–∞—Å?')) {
                publishToGitHub(scheduleEvents);
            }
        }
        
        function updateEvent(eventId, eventData) {
            const index = scheduleEvents.findIndex(e => e.id === eventId);
            if (index !== -1) {
                scheduleEvents[index] = { ...scheduleEvents[index], ...eventData };
                saveScheduleToStorage();
                renderScheduleEvents();
                renderEventsList();
                updateStats();
                
                if (confirm('‚úÖ –ó–∞–Ω—è—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ! –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ —Å–µ–π—á–∞—Å?')) {
                    publishToGitHub(scheduleEvents);
                }
            }
        }
        
        function deleteEvent(eventId) {
            const event = scheduleEvents.find(e => e.id === eventId);
            if (!event) return;
            
            if (confirm(`–£–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ "${event.title}"?`)) {
                scheduleEvents = scheduleEvents.filter(e => e.id !== eventId);
                saveScheduleToStorage();
                renderScheduleEvents();
                renderEventsList();
                updateStats();
                showNotification('–ó–∞–Ω—è—Ç–∏–µ —É–¥–∞–ª–µ–Ω–æ', 'success');
                
                if (editingEventId === eventId) {
                    closeEventModal();
                }
                
                if (scheduleEvents.length > 0 && confirm('–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ?')) {
                    publishToGitHub(scheduleEvents);
                }
            }
        }
        
        function deleteCurrentEvent() {
            if (editingEventId) {
                deleteEvent(editingEventId);
            }
        }
        
        function clearAllEvents() {
            if (scheduleEvents.length === 0) {
                showNotification('–ù–µ—Ç –∑–∞–Ω—è—Ç–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è', 'info');
                return;
            }
            
            if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –∑–∞–Ω—è—Ç–∏—è (${scheduleEvents.length})?`)) {
                scheduleEvents = [];
                saveScheduleToStorage();
                renderScheduleEvents();
                renderEventsList();
                updateStats();
                showNotification('–í—Å–µ –∑–∞–Ω—è—Ç–∏—è —É–¥–∞–ª–µ–Ω—ã', 'success');
                
                if (confirm('–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø—É—Å—Ç–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ?')) {
                    publishToGitHub(scheduleEvents);
                }
            }
        }
        
        // ===== –£–¢–ò–õ–ò–¢–´ =====
        function timeToDecimal(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours + minutes / 60;
        }
        
        function decimalToTime(decimalTime) {
            const hours = Math.floor(decimalTime);
            const minutes = Math.round((decimalTime - hours) * 60);
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }
        
        function setEventDuration(minutes) {
            const startTimeInput = document.getElementById('eventStartTime');
            const endTimeInput = document.getElementById('eventEndTime');
            
            const startTime = startTimeInput.value;
            if (!startTime) return;
            
            const [hours, mins] = startTime.split(':').map(Number);
            const startDate = new Date();
            startDate.setHours(hours, mins, 0, 0);
            
            const endDate = new Date(startDate.getTime() + minutes * 60000);
            const endHours = endDate.getHours();
            const endMinutes = endDate.getMinutes();
            
            if (endHours > 22 || (endHours === 22 && endMinutes > 0)) {
                endTimeInput.value = "22:00";
            } else {
                endTimeInput.value = 
                    endDate.getHours().toString().padStart(2, '0') + ':' + 
                    endDate.getMinutes().toString().padStart(2, '0');
            }
        }
        
        function updateEndTimeBasedOnDuration(minutes = 60) {
            const startTimeInput = document.getElementById('eventStartTime');
            const endTimeInput = document.getElementById('eventEndTime');
            
            const startTime = startTimeInput.value;
            if (!startTime) return;
            
            const [hours, mins] = startTime.split(':').map(Number);
            const startDate = new Date();
            startDate.setHours(hours, mins, 0, 0);
            
            const endDate = new Date(startDate.getTime() + minutes * 60000);
            const endHours = endDate.getHours();
            const endMinutes = endDate.getMinutes();
            
            if (endHours > 22 || (endHours === 22 && endMinutes > 0)) {
                endTimeInput.value = "22:00";
            } else {
                endTimeInput.value = 
                    endDate.getHours().toString().padStart(2, '0') + ':' + 
                    endDate.getMinutes().toString().padStart(2, '0');
            }
        }
        
        // ===== LOCALSTORAGE =====
        function saveScheduleToStorage() {
            localStorage.setItem('danceStudioSchedule', JSON.stringify(scheduleEvents));
        }
        
        function loadScheduleFromStorage() {
            try {
                const saved = localStorage.getItem('danceStudioSchedule');
                if (saved) {
                    scheduleEvents = JSON.parse(saved);
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:', e);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è', 'error');
            }
        }
        
        // ===== –°–¢–ê–¢–ò–°–¢–ò–ö–ê =====
        function updateStats() {
            document.getElementById('totalEvents').textContent = scheduleEvents.length;
            
            const today = new Date().getDay();
            const todayIndex = today === 0 ? 7 : today;
            const todayEvents = scheduleEvents.filter(event => event.day === todayIndex).length;
            document.getElementById('todayEvents').textContent = todayEvents;
        }
        
        // ===== –≠–ö–°–ü–û–†–¢ =====
        function exportSchedule() {
            if (scheduleEvents.length === 0) {
                showNotification('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'info');
                return;
            }
            
            let csv = '–î–µ–Ω—å,–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞,–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è,–ù–∞–∑–≤–∞–Ω–∏–µ,–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å,–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞,–û–ø–∏—Å–∞–Ω–∏–µ,–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤,–¶–µ–Ω–∞(‚ÇΩ)\n';
            
            scheduleEvents.sort((a, b) => {
                if (a.day !== b.day) return a.day - b.day;
                return a.startTime - b.startTime;
            }).forEach(event => {
                const dayName = dayNames[event.day];
                const startTime = decimalToTime(event.startTime);
                const endTime = decimalToTime(event.endTime);
                
                csv += `"${dayName}","${startTime}","${endTime}","${event.title}","${event.instructor || ''}","${event.ageGroup || ''}","${event.description || ''}","${event.maxParticipants || ''}","${event.price || ''}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Ç–∞–Ω—Ü—ã_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            URL.revokeObjectURL(url);
            showNotification('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ CSV', 'success');
        }
        
        // ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø =====
        function showNotification(message, type = 'info') {
            document.querySelectorAll('.notification').forEach(el => el.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
        
        // ===== –≠–ö–°–ü–û–†–¢ –§–£–ù–ö–¶–ò–ô =====
        window.openEventModalForSlot = openEventModalForSlot;
        window.openEventModal = openEventModal;
        window.closeEventModal = closeEventModal;
        window.editEvent = editEvent;
        window.deleteEvent = deleteEvent;
        window.deleteCurrentEvent = deleteCurrentEvent;
        window.clearAllEvents = clearAllEvents;
        window.exportSchedule = exportSchedule;
        window.setEventDuration = setEventDuration;
        window.selectAgeGroup = selectAgeGroup;
        window.selectDirection = selectDirection;
        window.publishToGitHub = publishToGitHub;
        window.downloadScheduleJSON = downloadScheduleJSON;
    </script>
</body>
</html>
