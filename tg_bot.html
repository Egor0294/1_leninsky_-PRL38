<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIT Management Pro - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–æ–º</title>
    <style>
        :root {
            --primary: #0088cc;
            --primary-dark: #006699;
            --secondary: #2c3e50;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #ecf0f1;
            --dark: #34495e;
            --gray: #95a5a6;
            --gray-light: #bdc3c7;
            --border-radius: 12px;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            padding: 20px;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light);
        }
        
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            min-height: 95vh;
        }
        
        .dark-mode .dashboard {
            background: #2c3e50;
            color: var(--light);
        }
        
        /* Header */
        .header {
            background: linear-gradient(45deg, #4CAF50, #2196F3);
            color: white;
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            backdrop-filter: blur(10px);
        }
        
        .logo h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .logo p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            min-height: calc(95vh - 130px);
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--light);
            padding: 20px;
            border-right: 3px solid white;
            overflow-y: auto;
        }
        
        .dark-mode .sidebar {
            background: #34495e;
            border-right-color: #2c3e50;
        }
        
        .sidebar-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .sidebar-section {
            background: #2c3e50;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .dark-mode .section-title {
            color: var(--light);
        }
        
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .input-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray);
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .dark-mode .input-group label {
            color: var(--gray-light);
        }
        
        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--light);
            border-radius: 8px;
            font-size: 14px;
            transition: var(--transition);
            background: white;
        }
        
        .dark-mode .input-field {
            background: #3b4a5d;
            border-color: #4a5d73;
            color: var(--light);
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 136, 204, 0.1);
        }
        
        .btn {
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #4CAF50, #2196F3);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(45deg, var(--success), #2ecc71);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #e74c3c);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(45deg, var(--warning), #f1c40f);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px solid var(--light);
        }
        
        .dark-mode .stat-card {
            background: #2c3e50;
            border-color: #34495e;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 11px;
            color: var(--gray);
            text-transform: uppercase;
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        .dark-mode .main-content {
            background: #2c3e50;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            background: var(--light);
            border-bottom: 3px solid white;
            padding: 0 20px;
            overflow-x: auto;
        }
        
        .dark-mode .tabs {
            background: #34495e;
            border-bottom-color: #2c3e50;
        }
        
        .tab {
            padding: 18px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            position: relative;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .dark-mode .tab {
            color: var(--gray-light);
        }
        
        .tab:hover {
            color: var(--dark);
            background: rgba(255, 255, 255, 0.5);
        }
        
        .dark-mode .tab:hover {
            color: var(--light);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab.active {
            color: var(--primary);
            background: white;
            border-bottom-color: var(--primary);
        }
        
        .dark-mode .tab.active {
            background: #2c3e50;
            color: var(--primary);
        }
        
        .tab-badge {
            background: var(--danger);
            color: white;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
        }
        
        /* Tab Content */
        .tab-content {
            flex: 1;
            overflow: hidden;
            display: none;
            padding: 25px;
        }
        
        .tab-content.active {
            display: block;
            overflow-y: auto;
        }
        
        /* Clients Tab */
        .clients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .client-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            border: 2px solid var(--light);
            transition: var(--transition);
        }
        
        .dark-mode .client-card {
            background: #2c3e50;
            border-color: #34495e;
        }
        
        .client-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .client-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .client-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff9966, #ff5e62);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .client-info {
            flex: 1;
        }
        
        .client-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .client-phone {
            font-size: 14px;
            color: var(--gray);
        }
        
        .client-meta {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .client-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .client-stat {
            text-align: center;
            padding: 10px;
            background: var(--light);
            border-radius: 8px;
        }
        
        .dark-mode .client-stat {
            background: #34495e;
        }
        
        .client-actions {
            display: flex;
            gap: 10px;
        }
        
        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--light);
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .dark-mode .icon-btn {
            background: #34495e;
            color: var(--light);
        }
        
        .icon-btn:hover {
            background: var(--primary);
            color: white;
            transform: rotate(15deg);
        }
        
        /* Trainers Tab */
        .trainers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .trainer-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            border: 2px solid var(--light);
            transition: var(--transition);
        }
        
        .dark-mode .trainer-card {
            background: #2c3e50;
            border-color: #34495e;
        }
        
        .trainer-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .trainer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .trainer-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(45deg, #36D1DC, #5B86E5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }
        
        .trainer-info {
            flex: 1;
        }
        
        .trainer-name {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .trainer-specialty {
            color: var(--gray);
            font-size: 14px;
        }
        
        .trainer-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .trainer-stat {
            text-align: center;
            padding: 10px;
        }
        
        .trainer-stat-number {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .trainer-stat-label {
            font-size: 11px;
            color: var(--gray);
            text-transform: uppercase;
        }
        
        .trainer-clients {
            margin-top: 15px;
        }
        
        .client-badge {
            display: inline-block;
            padding: 5px 10px;
            background: var(--light);
            border-radius: 15px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .dark-mode .client-badge {
            background: #34495e;
        }
        
        /* Auto Messages Tab */
        .auto-messages-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .message-template-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            border: 2px solid var(--light);
            margin-bottom: 20px;
        }
        
        .dark-mode .message-template-card {
            background: #2c3e50;
            border-color: #34495e;
        }
        
        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .template-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .dark-mode .template-title {
            color: var(--light);
        }
        
        .template-content {
            margin-bottom: 20px;
        }
        
        .template-variables {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .variable-tag {
            display: inline-block;
            padding: 5px 10px;
            background: var(--light);
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            cursor: pointer;
        }
        
        .dark-mode .variable-tag {
            background: #34495e;
        }
        
        /* Schedule Tab */
        .schedule-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }
        
        .schedule-sidebar {
            background: var(--light);
            padding: 20px;
            border-radius: var(--border-radius);
        }
        
        .dark-mode .schedule-sidebar {
            background: #34495e;
        }
        
        .schedule-calendar {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            border: 2px solid var(--light);
        }
        
        .dark-mode .schedule-calendar {
            background: #2c3e50;
            border-color: #34495e;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .calendar-week {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .calendar-day {
            text-align: center;
            padding: 10px;
            font-weight: 600;
            color: var(--gray);
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        
        .calendar-date {
            height: 60px;
            border: 2px solid var(--light);
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }
        
        .calendar-date:hover {
            border-color: var(--primary);
        }
        
        .calendar-date.has-sessions {
            background: rgba(76, 175, 80, 0.1);
        }
        
        .session-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* Toast */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }
        
        .toast {
            background: white;
            border-radius: 8px;
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid var(--info);
        }
        
        .dark-mode .toast {
            background: #2c3e50;
            border-left-color: var(--info);
        }
        
        .toast.success {
            border-left-color: var(--success);
        }
        
        .toast.error {
            border-left-color: var(--danger);
        }
        
        .toast.warning {
            border-left-color: var(--warning);
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow);
        }
        
        .dark-mode .modal {
            background: #2c3e50;
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 2px solid var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .dark-mode .modal-header {
            border-bottom-color: #34495e;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }
        
        .dark-mode .modal-close {
            color: var(--gray-light);
        }
        
        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }
        
        .dark-mode .empty-state {
            color: var(--gray-light);
        }
        
        .empty-icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        /* Switch */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-light);
            transition: var(--transition);
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--success);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                max-height: 400px;
                border-right: none;
                border-bottom: 3px solid white;
            }
            
            .schedule-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 120px;
                justify-content: center;
                padding: 15px;
            }
            
            .clients-grid,
            .trainers-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üí™</div>
                <div>
                    <h1>FIT Management Pro</h1>
                    <p>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–æ–º</p>
                </div>
            </div>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span id="connectionStatus">–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞</span>
            </div>
        </div>
        
        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="section-title">üìä –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    
                    <div class="quick-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="totalClients">0</div>
                            <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalTrainers">0</div>
                            <div class="stat-label">–¢—Ä–µ–Ω–µ—Ä–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="activeSessions">0</div>
                            <div class="stat-label">–°–µ–≥–æ–¥–Ω—è –∑–∞–Ω—è—Ç–∏–π</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="subscriptions">0</div>
                            <div class="stat-label">–ê–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showAddClientModal()" style="width: 100%; margin-bottom: 10px;">
                        üë§ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
                    </button>
                    <button class="btn btn-success" onclick="showAddTrainerModal()" style="width: 100%;">
                        üèãÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–Ω–µ—Ä–∞
                    </button>
                </div>
                
                <div class="sidebar-section">
                    <div class="section-title">üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    
                    <div class="input-group">
                        <label>–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</label>
                        <select class="input-field" id="autoMessageType">
                            <option value="session_reminder">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–Ω—è—Ç–∏–∏</option>
                            <option value="subscription_expiry">–û–∫–æ–Ω—á–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</option>
                            <option value="new_client">–ù–æ–≤–æ–º—É –∫–ª–∏–µ–Ω—Ç—É</option>
                            <option value="birthday">–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è</option>
                            <option value="promotion">–ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label>–î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</label>
                        <input type="datetime-local" class="input-field" id="messageSchedule">
                    </div>
                    
                    <button class="btn btn-primary" onclick="scheduleAutoMessage()" style="width: 100%; margin-bottom: 10px;">
                        ‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button class="btn btn-success" onclick="sendTestMessage()" style="width: 100%;">
                        üß™ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
                    </button>
                </div>
                
                <div class="sidebar-section">
                    <div class="section-title">‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        <button class="btn" onclick="sendSessionReminders()">üèãÔ∏è –ù–∞–ø–æ–º–Ω–∏—Ç—å –æ –∑–∞–Ω—è—Ç–∏—è—Ö</button>
                        <button class="btn" onclick="checkExpiringSubscriptions()">üìÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã</button>
                        <button class="btn" onclick="generateReport()">üìä –û—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü</button>
                        <button class="btn" onclick="syncWithTelegram()">ü§ñ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <!-- Tabs -->
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('clients')">
                        <span>üë•</span> –ö–ª–∏–µ–Ω—Ç—ã
                        <span class="tab-badge" id="clientsBadge">0</span>
                    </div>
                    <div class="tab" onclick="switchTab('trainers')">
                        <span>üèãÔ∏è</span> –¢—Ä–µ–Ω–µ—Ä—ã
                        <span class="tab-badge" id="trainersBadge">0</span>
                    </div>
                    <div class="tab" onclick="switchTab('automessages')">
                        <span>ü§ñ</span> –ê–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è
                    </div>
                    <div class="tab" onclick="switchTab('schedule')">
                        <span>üìÖ</span> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                        <span class="tab-badge" id="scheduleBadge">0</span>
                    </div>
                    <div class="tab" onclick="switchTab('subscriptions')">
                        <span>üé´</span> –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã
                        <span class="tab-badge" id="subscriptionsBadge">0</span>
                    </div>
                </div>
                
                <!-- Clients Tab -->
                <div id="clients-tab" class="tab-content active">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px;">
                        <h2 style="color: var(--secondary);">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏</h2>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" class="input-field" id="clientSearch" placeholder="–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞..." style="width: 250px;">
                            <button class="btn btn-primary" onclick="filterClients()">üîç –ü–æ–∏—Å–∫</button>
                            <button class="btn" onclick="exportClients()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
                        </div>
                    </div>
                    
                    <div id="clientsContainer" class="clients-grid">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
                
                <!-- Trainers Tab -->
                <div id="trainers-tab" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="color: var(--secondary);">üèãÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞–º–∏</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="assignClientsToTrainer()">üë• –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤</button>
                            <button class="btn btn-success" onclick="showAddTrainerModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–Ω–µ—Ä–∞</button>
                        </div>
                    </div>
                    
                    <div id="trainersContainer" class="trainers-grid">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
                
                <!-- Auto Messages Tab -->
                <div id="automessages-tab" class="tab-content">
                    <div class="auto-messages-container">
                        <h2 style="color: var(--secondary); margin-bottom: 25px;">ü§ñ –®–∞–±–ª–æ–Ω—ã –∞–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏–π</h2>
                        
                        <div class="message-template-card">
                            <div class="template-header">
                                <div class="template-title">üèãÔ∏è –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–Ω—è—Ç–∏–∏</div>
                                <label class="switch">
                                    <input type="checkbox" id="templateSession" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="template-content">
                                <div class="template-variables">
                                    <span class="variable-tag" onclick="insertVariable('{client_name}')">{client_name}</span>
                                    <span class="variable-tag" onclick="insertVariable('{trainer_name}')">{trainer_name}</span>
                                    <span class="variable-tag" onclick="insertVariable('{session_time}')">{session_time}</span>
                                    <span class="variable-tag" onclick="insertVariable('{session_date}')">{session_date}</span>
                                    <span class="variable-tag" onclick="insertVariable('{location}')">{location}</span>
                                </div>
                                <textarea class="input-field" id="sessionTemplate" rows="4" 
                                          style="width: 100%; font-family: monospace;">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {client_name}! –ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –í–∞—à–µ–º –∑–∞–Ω—è—Ç–∏–∏ —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º {trainer_name} –∑–∞–≤—Ç—Ä–∞ –≤ {session_time}. –ú–µ—Å—Ç–æ: {location}. –ñ–¥–µ–º –í–∞—Å!</textarea>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--gray);">
                                    <strong>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> –∑–∞ 24 —á–∞—Å–∞ –¥–æ –∑–∞–Ω—è—Ç–∏—è
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-template-card">
                            <div class="template-header">
                                <div class="template-title">üé´ –û–∫–æ–Ω—á–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</div>
                                <label class="switch">
                                    <input type="checkbox" id="templateSubscription" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="template-content">
                                <div class="template-variables">
                                    <span class="variable-tag" onclick="insertVariable('{client_name}')">{client_name}</span>
                                    <span class="variable-tag" onclick="insertVariable('{subscription_type}')">{subscription_type}</span>
                                    <span class="variable-tag" onclick="insertVariable('{expiry_date}')">{expiry_date}</span>
                                    <span class="variable-tag" onclick="insertVariable('{remaining_sessions}')">{remaining_sessions}</span>
                                    <span class="variable-tag" onclick="insertVariable('{renew_link}')">{renew_link}</span>
                                </div>
                                <textarea class="input-field" id="subscriptionTemplate" rows="4" 
                                          style="width: 100%; font-family: monospace;">–£–≤–∞–∂–∞–µ–º—ã–π(–∞—è) {client_name}! –í–∞—à –∞–±–æ–Ω–µ–º–µ–Ω—Ç "{subscription_type}" –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è {expiry_date}. –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π: {remaining_sessions}. –ü—Ä–æ–¥–ª–∏—Ç–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç —Å–æ —Å–∫–∏–¥–∫–æ–π 10%!</textarea>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--gray);">
                                    <strong>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> –∑–∞ 3 –¥–Ω—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è
                                </div>
                            </div>
                        </div>
                        
                        <div class="message-template-card">
                            <div class="template-header">
                                <div class="template-title">üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ–º—É –∫–ª–∏–µ–Ω—Ç—É</div>
                                <label class="switch">
                                    <input type="checkbox" id="templateWelcome" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="template-content">
                                <div class="template-variables">
                                    <span class="variable-tag" onclick="insertVariable('{client_name}')">{client_name}</span>
                                    <span class="variable-tag" onclick="insertVariable('{trainer_name}')">{trainer_name}</span>
                                    <span class="variable-tag" onclick="insertVariable('{first_session}')">{first_session}</span>
                                    <span class="variable-tag" onclick="insertVariable('{club_address}')">{club_address}</span>
                                    <span class="variable-tag" onclick="insertVariable('{contacts}')">{contacts}</span>
                                </div>
                                <textarea class="input-field" id="welcomeTemplate" rows="4" 
                                          style="width: 100%; font-family: monospace;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à —Ñ–∏—Ç–Ω–µ—Å-–∫–ª—É–±, {client_name}! –í–∞—à —Ç—Ä–µ–Ω–µ—Ä: {trainer_name}. –ü–µ—Ä–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ: {first_session}. –ê–¥—Ä–µ—Å: {club_address}. –ö–æ–Ω—Ç–∞–∫—Ç—ã: {contacts}. –£—Å–ø–µ—à–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫!</textarea>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--gray);">
                                    <strong>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px; padding: 20px; background: var(--light); border-radius: var(--border-radius);">
                            <h4 style="margin-bottom: 15px; color: var(--secondary);">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏</h4>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-size: 12px; color: var(--gray);">–¢–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label>
                                    <select class="input-field" id="notificationType">
                                        <option value="telegram">Telegram</option>
                                        <option value="sms">SMS</option>
                                        <option value="email">Email</option>
                                        <option value="all">–í—Å–µ —Å–ø–æ—Å–æ–±—ã</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-size: 12px; color: var(--gray);">–í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (—á–∞—Å–æ–≤ –¥–æ)</label>
                                    <select class="input-field" id="reminderTime">
                                        <option value="1">1 —á–∞—Å</option>
                                        <option value="3">3 —á–∞—Å–∞</option>
                                        <option value="24" selected>24 —á–∞—Å–∞</option>
                                        <option value="48">48 —á–∞—Å–æ–≤</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveTemplates()" style="margin-top: 20px; width: 100%;">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã
                        </button>
                    </div>
                </div>
                
                <!-- Schedule Tab -->
                <div id="schedule-tab" class="tab-content">
                    <div class="schedule-container">
                        <div class="schedule-sidebar">
                            <h3 style="margin-bottom: 20px; color: var(--secondary);">üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞</h3>
                            <div style="text-align: center; margin-bottom: 20px;">
                                <div style="font-size: 32px; font-weight: bold; color: var(--primary);" id="currentDate">--</div>
                                <div style="color: var(--gray);" id="currentDay">--</div>
                            </div>
                            
                            <div style="margin-bottom: 25px;">
                                <h4 style="margin-bottom: 15px; color: var(--secondary);">–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è</h4>
                                <div id="todaySessions">
                                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin-bottom: 15px; color: var(--secondary);">–§–∏–ª—å—Ç—Ä—ã</h4>
                                <div class="input-group">
                                    <label>–¢—Ä–µ–Ω–µ—Ä</label>
                                    <select class="input-field" id="trainerFilter">
                                        <option value="all">–í—Å–µ —Ç—Ä–µ–Ω–µ—Ä—ã</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>–¢–∏–ø –∑–∞–Ω—è—Ç–∏—è</label>
                                    <select class="input-field" id="sessionTypeFilter">
                                        <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                                        <option value="individual">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ</option>
                                        <option value="group">–ì—Ä—É–ø–ø–æ–≤–æ–µ</option>
                                        <option value="online">–û–Ω–ª–∞–π–Ω</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="schedule-calendar">
                            <div class="calendar-header">
                                <button class="btn" onclick="prevMonth()">‚óÄÔ∏è</button>
                                <h3 id="currentMonth">–ú–µ—Å—è—Ü –ì–æ–¥</h3>
                                <button class="btn" onclick="nextMonth()">‚ñ∂Ô∏è</button>
                            </div>
                            
                            <div class="calendar-week">
                                <div class="calendar-day">–ü–Ω</div>
                                <div class="calendar-day">–í—Ç</div>
                                <div class="calendar-day">–°—Ä</div>
                                <div class="calendar-day">–ß—Ç</div>
                                <div class="calendar-day">–ü—Ç</div>
                                <div class="calendar-day">–°–±</div>
                                <div class="calendar-day">–í—Å</div>
                            </div>
                            
                            <div id="calendarDays" class="calendar-days">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Subscriptions Tab -->
                <div id="subscriptions-tab" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="color: var(--secondary);">üé´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º–∏</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="showAddSubscriptionModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç</button>
                            <button class="btn btn-warning" onclick="checkAllSubscriptions()">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ</button>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-number" id="activeSubs">0</div>
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="expiringSoon">0</div>
                            <div class="stat-label">–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="expiredSubs">0</div>
                            <div class="stat-label">–ò—Å—Ç–µ–∫–ª–æ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalRevenue">0</div>
                            <div class="stat-label">–í—ã—Ä—É—á–∫–∞ (—Ä—É–±)</div>
                        </div>
                    </div>
                    
                    <div id="subscriptionsContainer">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal-overlay" id="addClientModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title">üë§ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞</div>
                <button class="modal-close" onclick="closeModal('addClientModal')">√ó</button>
            </div>
            
            <div style="padding: 20px;">
                <div class="input-group">
                    <label>–§–ò–û –∫–ª–∏–µ–Ω—Ç–∞</label>
                    <input type="text" class="input-field" id="clientName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                </div>
                
                <div class="input-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" class="input-field" id="clientPhone" placeholder="+7 (999) 123-45-67">
                </div>
                
                <div class="input-group">
                    <label>Telegram ID (–µ—Å–ª–∏ –µ—Å—Ç—å)</label>
                    <input type="text" class="input-field" id="clientTelegram" placeholder="@username –∏–ª–∏ 123456789">
                </div>
                
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" class="input-field" id="clientEmail" placeholder="client@example.com">
                </div>
                
                <div class="input-group">
                    <label>–¢—Ä–µ–Ω–µ—Ä</label>
                    <select class="input-field" id="clientTrainer">
                        <option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" class="input-field" id="clientBirthday">
                </div>
                
                <div class="input-group">
                    <label>–ó–∞–º–µ—Ç–∫–∏</label>
                    <textarea class="input-field" id="clientNotes" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveClient()" style="width: 100%; margin-top: 20px;">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay" id="addTrainerModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title">üèãÔ∏è –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Ç—Ä–µ–Ω–µ—Ä–∞</div>
                <button class="modal-close" onclick="closeModal('addTrainerModal')">√ó</button>
            </div>
            
            <div style="padding: 20px;">
                <div class="input-group">
                    <label>–§–ò–û —Ç—Ä–µ–Ω–µ—Ä–∞</label>
                    <input type="text" class="input-field" id="trainerName" placeholder="–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á">
                </div>
                
                <div class="input-group">
                    <label>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</label>
                    <select class="input-field" id="trainerSpecialty">
                        <option value="fitness">–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä</option>
                        <option value="yoga">–ô–æ–≥–∞</option>
                        <option value="crossfit">–ö—Ä–æ—Å—Å—Ñ–∏—Ç</option>
                        <option value="pilates">–ü–∏–ª–∞—Ç–µ—Å</option>
                        <option value="rehabilitation">–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è</option>
                        <option value="nutrition">–ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" class="input-field" id="trainerPhone" placeholder="+7 (999) 123-45-67">
                </div>
                
                <div class="input-group">
                    <label>Telegram –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</label>
                    <input type="text" class="input-field" id="trainerTelegram" placeholder="@trainer_username">
                </div>
                
                <div class="input-group">
                    <label>–°—Ç–∞–≤–∫–∞ (—Ä—É–±/—á–∞—Å)</label>
                    <input type="number" class="input-field" id="trainerRate" placeholder="1000" min="0">
                </div>
                
                <div class="input-group">
                    <label>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã</label>
                    <textarea class="input-field" id="trainerSchedule" rows="3" placeholder="–ü–Ω-–ü—Ç: 9:00-21:00, –°–±: 10:00-18:00, –í—Å: –≤—ã—Ö–æ–¥–Ω–æ–π"></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="saveTrainer()" style="width: 100%; margin-top: 20px;">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–µ–Ω–µ—Ä–∞
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // ===================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====================
        let clients = [];
        let trainers = [];
        let subscriptions = [];
        let trainingSessions = [];
        let autoMessages = [];
        let messageTemplates = {};
        let currentDate = new Date();

        // ===================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====================
        window.onload = function() {
            loadMockData();
            loadTemplates();
            renderAll();
            updateCalendar();
            updateTodaySessions();
            
            showToast('FIT Management Pro –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
        };
        
        function loadMockData() {
            // –¢—Ä–µ–Ω–µ—Ä—ã
            trainers = [
                {
                    id: 1,
                    name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≤–∞–Ω–æ–≤",
                    specialty: "–ö—Ä–æ—Å—Å—Ñ–∏—Ç",
                    phone: "+7 (999) 111-22-33",
                    telegram: "@alex_crossfit",
                    rate: 1500,
                    schedule: "–ü–Ω-–ü—Ç: 9:00-21:00, –°–±: 10:00-18:00",
                    clients: [1, 2],
                    stats: {
                        sessions: 45,
                        rating: 4.9,
                        experience: 5
                    }
                },
                {
                    id: 2,
                    name: "–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞",
                    specialty: "–ô–æ–≥–∞",
                    phone: "+7 (999) 222-33-44",
                    telegram: "@maria_yoga",
                    rate: 1200,
                    schedule: "–í—Ç-–ß—Ç: 10:00-20:00, –°–±-–í—Å: 9:00-15:00",
                    clients: [3, 4],
                    stats: {
                        sessions: 38,
                        rating: 4.8,
                        experience: 3
                    }
                },
                {
                    id: 3,
                    name: "–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤",
                    specialty: "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è",
                    phone: "+7 (999) 333-44-55",
                    telegram: "@dima_rehab",
                    rate: 1800,
                    schedule: "–ü–Ω-–°—Ä-–ü—Ç: 8:00-16:00",
                    clients: [5],
                    stats: {
                        sessions: 22,
                        rating: 4.7,
                        experience: 7
                    }
                }
            ];
            
            // –ö–ª–∏–µ–Ω—Ç—ã
            clients = [
                {
                    id: 1,
                    name: "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤",
                    phone: "+7 (999) 123-45-67",
                    telegram: "@ivan_sidorov",
                    email: "ivan@example.com",
                    trainerId: 1,
                    birthday: "1990-05-15",
                    notes: "–õ—é–±–∏—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
                    subscription: {
                        type: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, 12 –∑–∞–Ω—è—Ç–∏–π",
                        startDate: "2024-01-10",
                        endDate: "2024-03-10",
                        remaining: 5,
                        status: "active"
                    }
                },
                {
                    id: 2,
                    name: "–ï–ª–µ–Ω–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞",
                    phone: "+7 (999) 234-56-78",
                    telegram: "@elena_fit",
                    email: "elena@example.com",
                    trainerId: 1,
                    birthday: "1985-08-22",
                    notes: "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç —É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è",
                    subscription: {
                        type: "–ì—Ä—É–ø–ø–æ–≤–æ–π, 8 –∑–∞–Ω—è—Ç–∏–π",
                        startDate: "2024-02-01",
                        endDate: "2024-03-01",
                        remaining: 2,
                        status: "expiring"
                    }
                },
                {
                    id: 3,
                    name: "–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞",
                    phone: "+7 (999) 345-67-89",
                    telegram: "@anna_yoga",
                    email: "anna@example.com",
                    trainerId: 2,
                    birthday: "1995-03-30",
                    notes: "–ù–æ–≤–∏—á–æ–∫ –≤ –π–æ–≥–µ",
                    subscription: {
                        type: "–ü—Ä–æ–±–Ω—ã–π, 4 –∑–∞–Ω—è—Ç–∏—è",
                        startDate: "2024-02-15",
                        endDate: "2024-03-15",
                        remaining: 3,
                        status: "active"
                    }
                },
                {
                    id: 4,
                    name: "–°–µ—Ä–≥–µ–π –í–æ–ª–∫–æ–≤",
                    phone: "+7 (999) 456-78-90",
                    telegram: "@sergey_gym",
                    email: "sergey@example.com",
                    trainerId: 2,
                    birthday: "1988-11-10",
                    notes: "–¶–µ–ª—å - –ø–æ—Ö—É–¥–µ–Ω–∏–µ",
                    subscription: {
                        type: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, 16 –∑–∞–Ω—è—Ç–∏–π",
                        startDate: "2024-01-20",
                        endDate: "2024-04-20",
                        remaining: 10,
                        status: "active"
                    }
                },
                {
                    id: 5,
                    name: "–û–ª—å–≥–∞ –ú–æ—Ä–æ–∑–æ–≤–∞",
                    phone: "+7 (999) 567-89-01",
                    telegram: "@olga_health",
                    email: "olga@example.com",
                    trainerId: 3,
                    birthday: "1975-07-05",
                    notes: "–ü–æ—Å—Ç—Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è",
                    subscription: {
                        type: "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π, 20 –∑–∞–Ω—è—Ç–∏–π",
                        startDate: "2024-02-05",
                        endDate: "2024-05-05",
                        remaining: 15,
                        status: "active"
                    }
                }
            ];
            
            // –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã
            subscriptions = [
                {
                    id: 1,
                    clientId: 1,
                    type: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, 12 –∑–∞–Ω—è—Ç–∏–π",
                    price: 24000,
                    startDate: "2024-01-10",
                    endDate: "2024-03-10",
                    remaining: 5,
                    status: "active"
                },
                {
                    id: 2,
                    clientId: 2,
                    type: "–ì—Ä—É–ø–ø–æ–≤–æ–π, 8 –∑–∞–Ω—è—Ç–∏–π",
                    price: 16000,
                    startDate: "2024-02-01",
                    endDate: "2024-03-01",
                    remaining: 2,
                    status: "expiring"
                },
                {
                    id: 3,
                    clientId: 3,
                    type: "–ü—Ä–æ–±–Ω—ã–π, 4 –∑–∞–Ω—è—Ç–∏—è",
                    price: 6000,
                    startDate: "2024-02-15",
                    endDate: "2024-03-15",
                    remaining: 3,
                    status: "active"
                },
                {
                    id: 4,
                    clientId: 4,
                    type: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, 16 –∑–∞–Ω—è—Ç–∏–π",
                    price: 32000,
                    startDate: "2024-01-20",
                    endDate: "2024-04-20",
                    remaining: 10,
                    status: "active"
                },
                {
                    id: 5,
                    clientId: 5,
                    type: "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π, 20 –∑–∞–Ω—è—Ç–∏–π",
                    price: 40000,
                    startDate: "2024-02-05",
                    endDate: "2024-05-05",
                    remaining: 15,
                    status: "active"
                }
            ];
            
            // –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            trainingSessions = [
                {
                    id: 1,
                    clientId: 1,
                    trainerId: 1,
                    type: "individual",
                    date: today.toISOString().split('T')[0],
                    time: "10:00",
                    duration: 60,
                    status: "scheduled",
                    location: "–ó–∞–ª 1"
                },
                {
                    id: 2,
                    clientId: 2,
                    trainerId: 1,
                    type: "individual",
                    date: today.toISOString().split('T')[0],
                    time: "14:00",
                    duration: 60,
                    status: "scheduled",
                    location: "–ó–∞–ª 2"
                },
                {
                    id: 3,
                    clientId: 3,
                    trainerId: 2,
                    type: "group",
                    date: today.toISOString().split('T')[0],
                    time: "18:00",
                    duration: 90,
                    status: "scheduled",
                    location: "–ô–æ–≥–∞-—Å—Ç—É–¥–∏—è"
                },
                {
                    id: 4,
                    clientId: 4,
                    trainerId: 1,
                    type: "individual",
                    date: tomorrow.toISOString().split('T')[0],
                    time: "11:00",
                    duration: 60,
                    status: "scheduled",
                    location: "–ó–∞–ª 3"
                }
            ];
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
            updateTrainerSelectors();
        }
        
        function loadTemplates() {
            messageTemplates = JSON.parse(localStorage.getItem('fit_message_templates')) || {
                sessionReminder: {
                    enabled: true,
                    text: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {client_name}! –ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –í–∞—à–µ–º –∑–∞–Ω—è—Ç–∏–∏ —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º {trainer_name} –∑–∞–≤—Ç—Ä–∞ –≤ {session_time}. –ú–µ—Å—Ç–æ: {location}. –ñ–¥–µ–º –í–∞—Å!",
                    sendTime: 24
                },
                subscriptionExpiry: {
                    enabled: true,
                    text: "–£–≤–∞–∂–∞–µ–º—ã–π(–∞—è) {client_name}! –í–∞—à –∞–±–æ–Ω–µ–º–µ–Ω—Ç \"{subscription_type}\" –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è {expiry_date}. –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π: {remaining_sessions}. –ü—Ä–æ–¥–ª–∏—Ç–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç —Å–æ —Å–∫–∏–¥–∫–æ–π 10%!",
                    sendTime: 72
                },
                welcome: {
                    enabled: true,
                    text: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à —Ñ–∏—Ç–Ω–µ—Å-–∫–ª—É–±, {client_name}! –í–∞—à —Ç—Ä–µ–Ω–µ—Ä: {trainer_name}. –ü–µ—Ä–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ: {first_session}. –ê–¥—Ä–µ—Å: {club_address}. –ö–æ–Ω—Ç–∞–∫—Ç—ã: {contacts}. –£—Å–ø–µ—à–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫!",
                    sendTime: 0
                }
            };
            
            updateTemplatesUI();
        }
        
        function saveTemplates() {
            messageTemplates = {
                sessionReminder: {
                    enabled: document.getElementById('templateSession').checked,
                    text: document.getElementById('sessionTemplate').value,
                    sendTime: parseInt(document.getElementById('reminderTime').value) || 24
                },
                subscriptionExpiry: {
                    enabled: document.getElementById('templateSubscription').checked,
                    text: document.getElementById('subscriptionTemplate').value,
                    sendTime: 72
                },
                welcome: {
                    enabled: document.getElementById('templateWelcome').checked,
                    text: document.getElementById('welcomeTemplate').value,
                    sendTime: 0
                }
            };
            
            localStorage.setItem('fit_message_templates', JSON.stringify(messageTemplates));
            showToast('–®–∞–±–ª–æ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
        }
        
        function updateTemplatesUI() {
            if (messageTemplates.sessionReminder) {
                document.getElementById('templateSession').checked = messageTemplates.sessionReminder.enabled;
                document.getElementById('sessionTemplate').value = messageTemplates.sessionReminder.text;
            }
            
            if (messageTemplates.subscriptionExpiry) {
                document.getElementById('templateSubscription').checked = messageTemplates.subscriptionExpiry.enabled;
                document.getElementById('subscriptionTemplate').value = messageTemplates.subscriptionExpiry.text;
            }
            
            if (messageTemplates.welcome) {
                document.getElementById('templateWelcome').checked = messageTemplates.welcome.enabled;
                document.getElementById('welcomeTemplate').value = messageTemplates.welcome.text;
            }
        }
        
        // ===================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò =====================
        function renderAll() {
            renderClients();
            renderTrainers();
            renderSubscriptions();
            updateStats();
        }
        
        function renderClients() {
            const container = document.getElementById('clientsContainer');
            
            if (clients.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üë§</div>
                        <div>–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                        <button class="btn btn-primary" style="margin-top: 15px;" onclick="showAddClientModal()">
                            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
                        </button>
                    </div>`;
                return;
            }
            
            container.innerHTML = clients.map(client => {
                const trainer = trainers.find(t => t.id === client.trainerId);
                const subscription = subscriptions.find(s => s.clientId === client.id);
                const upcomingSessions = trainingSessions.filter(s => 
                    s.clientId === client.id && 
                    new Date(s.date) >= new Date()
                ).length;
                
                return `
                    <div class="client-card">
                        <div class="client-header">
                            <div class="client-avatar">${client.name.charAt(0)}</div>
                            <div class="client-info">
                                <div class="client-name">${client.name}</div>
                                <div class="client-phone">${client.phone}</div>
                            </div>
                        </div>
                        
                        <div class="client-meta">
                            <span>üéÇ ${new Date(client.birthday).toLocaleDateString('ru-RU')}</span>
                            <span>üèãÔ∏è ${trainer ? trainer.name : '–ù–µ—Ç —Ç—Ä–µ–Ω–µ—Ä–∞'}</span>
                        </div>
                        
                        <div class="client-stats">
                            <div class="client-stat">
                                <div style="font-size: 18px; font-weight: bold; color: var(--primary);">
                                    ${upcomingSessions}
                                </div>
                                <div style="font-size: 11px; color: var(--gray);">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è</div>
                            </div>
                            <div class="client-stat">
                                <div style="font-size: 18px; font-weight: bold; color: ${subscription?.status === 'active' ? 'var(--success)' : 'var(--warning)'};">
                                    ${subscription?.remaining || 0}
                                </div>
                                <div style="font-size: 11px; color: var(--gray);">–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π</div>
                            </div>
                        </div>
                        
                        ${client.notes ? `<div style="font-size: 12px; color: var(--gray); margin-bottom: 15px;">${client.notes}</div>` : ''}
                        
                        <div class="client-actions">
                            <button class="icon-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" onclick="editClient(${client.id})">‚úèÔ∏è</button>
                            <button class="icon-btn" title="–ù–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ" onclick="scheduleSession(${client.id})">üìÖ</button>
                            <button class="icon-btn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ" onclick="sendMessageToClient(${client.id})">üí¨</button>
                            <button class="icon-btn" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" onclick="showClientDetails(${client.id})">‚ÑπÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function renderTrainers() {
            const container = document.getElementById('trainersContainer');
            
            if (trainers.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üèãÔ∏è</div>
                        <div>–¢—Ä–µ–Ω–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                        <button class="btn btn-primary" style="margin-top: 15px;" onclick="showAddTrainerModal()">
                            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Ç—Ä–µ–Ω–µ—Ä–∞
                        </button>
                    </div>`;
                return;
            }
            
            container.innerHTML = trainers.map(trainer => {
                const trainerClients = clients.filter(c => c.trainerId === trainer.id);
                const todaySessions = trainingSessions.filter(s => 
                    s.trainerId === trainer.id && 
                    new Date(s.date).toDateString() === new Date().toDateString()
                ).length;
                
                return `
                    <div class="trainer-card">
                        <div class="trainer-header">
                            <div class="trainer-avatar">${trainer.name.charAt(0)}</div>
                            <div class="trainer-info">
                                <div class="trainer-name">${trainer.name}</div>
                                <div class="trainer-specialty">${getSpecialtyName(trainer.specialty)}</div>
                            </div>
                        </div>
                        
                        <div class="trainer-stats">
                            <div class="trainer-stat">
                                <div class="trainer-stat-number">${trainerClients.length}</div>
                                <div class="trainer-stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
                            </div>
                            <div class="trainer-stat">
                                <div class="trainer-stat-number">${todaySessions}</div>
                                <div class="trainer-stat-label">–°–µ–≥–æ–¥–Ω—è</div>
                            </div>
                            <div class="trainer-stat">
                                <div class="trainer-stat-number">${trainer.rate} ‚ÇΩ</div>
                                <div class="trainer-stat-label">/ —á–∞—Å</div>
                            </div>
                        </div>
                        
                        <div style="font-size: 12px; color: var(--gray); margin-bottom: 15px;">
                            üì± ${trainer.phone} | ${trainer.telegram}
                        </div>
                        
                        <div class="trainer-clients">
                            <div style="font-size: 12px; color: var(--gray); margin-bottom: 8px;">–ö–ª–∏–µ–Ω—Ç—ã:</div>
                            ${trainerClients.map(client => `
                                <span class="client-badge">${client.name}</span>
                            `).join('')}
                            ${trainerClients.length === 0 ? '<span style="color: var(--gray); font-size: 12px;">–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã</span>' : ''}
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn" onclick="notifyTrainer(${trainer.id})" style="flex: 1;">
                                üîî –£–≤–µ–¥–æ–º–∏—Ç—å
                            </button>
                            <button class="btn" onclick="showTrainerSchedule(${trainer.id})" style="flex: 1;">
                                üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function renderSubscriptions() {
            const container = document.getElementById('subscriptionsContainer');
            
            if (subscriptions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üé´</div>
                        <div>–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                        <button class="btn btn-primary" style="margin-top: 15px;" onclick="showAddSubscriptionModal()">
                            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç
                        </button>
                    </div>`;
                return;
            }
            
            const groupedSubscriptions = groupByStatus(subscriptions);
            container.innerHTML = '';
            
            // –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã
            if (groupedSubscriptions.active?.length > 0) {
                container.innerHTML += `
                    <h3 style="margin: 30px 0 15px 0; color: var(--success);">‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-bottom: 30px;">
                        ${groupedSubscriptions.active.map(sub => {
                            const client = clients.find(c => c.id === sub.clientId);
                            const trainer = trainers.find(t => t.id === client?.trainerId);
                            const daysLeft = Math.ceil((new Date(sub.endDate) - new Date()) / (1000 * 60 * 60 * 24));
                            
                            return `
                                <div class="client-card">
                                    <div class="client-header">
                                        <div class="client-avatar">${client?.name?.charAt(0) || '?'}</div>
                                        <div class="client-info">
                                            <div class="client-name">${client?.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–ª–∏–µ–Ω—Ç'}</div>
                                            <div class="client-phone">${client?.phone || ''}</div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-bottom: 15px;">
                                        <div style="font-weight: 600; font-size: 14px;">${sub.type}</div>
                                        <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                                            üìÖ ${new Date(sub.startDate).toLocaleDateString('ru-RU')} - ${new Date(sub.endDate).toLocaleDateString('ru-RU')}
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 20px; font-weight: bold; color: var(--primary);">${sub.remaining}</div>
                                            <div style="font-size: 11px; color: var(--gray);">–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 20px; font-weight: bold; color: ${daysLeft <= 7 ? 'var(--warning)' : 'var(--success)'};">${daysLeft}</div>
                                            <div style="font-size: 11px; color: var(--gray);">–î–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 20px; font-weight: bold; color: var(--info);">${sub.price} ‚ÇΩ</div>
                                            <div style="font-size: 11px; color: var(--gray);">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                                        <button class="btn" onclick="extendSubscription(${sub.id})" style="flex: 1;">üîÑ –ü—Ä–æ–¥–ª–∏—Ç—å</button>
                                        <button class="btn" onclick="sendReminder(${sub.id})" style="flex: 1;">üîî –ù–∞–ø–æ–º–Ω–∏—Ç—å</button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>`;
            }
            
            // –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã
            if (groupedSubscriptions.expiring?.length > 0) {
                container.innerHTML += `
                    <h3 style="margin: 30px 0 15px 0; color: var(--warning);">‚ö†Ô∏è –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-bottom: 30px;">
                        ${groupedSubscriptions.expiring.map(sub => {
                            const client = clients.find(c => c.id === sub.clientId);
                            const daysLeft = Math.ceil((new Date(sub.endDate) - new Date()) / (1000 * 60 * 60 * 24));
                            
                            return `
                                <div class="client-card" style="border-color: var(--warning);">
                                    <div class="client-header">
                                        <div class="client-avatar" style="background: linear-gradient(45deg, #ff9966, #ff5e62);">${client?.name?.charAt(0) || '?'}</div>
                                        <div class="client-info">
                                            <div class="client-name">${client?.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–ª–∏–µ–Ω—Ç'}</div>
                                            <div class="client-phone">${client?.phone || ''}</div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-bottom: 15px;">
                                        <div style="font-weight: 600; font-size: 14px;">${sub.type}</div>
                                        <div style="font-size: 12px; color: var(--warning); margin-top: 5px;">
                                            ‚è≥ –û–∫–æ–Ω—á–∞–Ω–∏–µ: ${new Date(sub.endDate).toLocaleDateString('ru-RU')}
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <div>
                                            <div style="font-size: 20px; font-weight: bold; color: var(--warning);">${daysLeft}</div>
                                            <div style="font-size: 11px; color: var(--gray);">–î–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 20px; font-weight: bold; color: var(--warning);">${sub.remaining}</div>
                                            <div style="font-size: 11px; color: var(--gray);">–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π</div>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-warning" onclick="sendReminder(${sub.id})" style="width: 100%;">
                                        üîî –ù–∞–ø–æ–º–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É
                                    </button>
                                </div>
                            `;
                        }).join('')}
                    </div>`;
            }
        }
        
        // ===================== –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø =====================
        function showAddClientModal() {
            document.getElementById('addClientModal').classList.add('active');
        }
        
        function showAddTrainerModal() {
            document.getElementById('addTrainerModal').classList.add('active');
        }
        
        function saveClient() {
            const name = document.getElementById('clientName').value.trim();
            const phone = document.getElementById('clientPhone').value.trim();
            
            if (!name || !phone) {
                showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            const newClient = {
                id: Date.now(),
                name: name,
                phone: phone,
                telegram: document.getElementById('clientTelegram').value.trim(),
                email: document.getElementById('clientEmail').value.trim(),
                trainerId: document.getElementById('clientTrainer').value ? parseInt(document.getElementById('clientTrainer').value) : null,
                birthday: document.getElementById('clientBirthday').value,
                notes: document.getElementById('clientNotes').value.trim()
            };
            
            clients.push(newClient);
            
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–±–Ω—ã–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
            const startDate = new Date();
            const endDate = new Date(startDate);
            endDate.setDate(endDate.getDate() + 30);
            
            const newSubscription = {
                id: Date.now() + 1,
                clientId: newClient.id,
                type: "–ü—Ä–æ–±–Ω—ã–π, 2 –∑–∞–Ω—è—Ç–∏—è",
                price: 0,
                startDate: startDate.toISOString().split('T')[0],
                endDate: endDate.toISOString().split('T')[0],
                remaining: 2,
                status: "active"
            };
            
            subscriptions.push(newSubscription);
            
            closeModal('addClientModal');
            renderAll();
            updateTrainerSelectors();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (messageTemplates.welcome?.enabled && (newClient.telegram || newClient.email)) {
                sendWelcomeMessage(newClient, newSubscription);
            }
            
            showToast('–ö–ª–∏–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
        }
        
        function saveTrainer() {
            const name = document.getElementById('trainerName').value.trim();
            const phone = document.getElementById('trainerPhone').value.trim();
            
            if (!name || !phone) {
                showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            const newTrainer = {
                id: Date.now(),
                name: name,
                specialty: document.getElementById('trainerSpecialty').value,
                phone: phone,
                telegram: document.getElementById('trainerTelegram').value.trim(),
                rate: parseInt(document.getElementById('trainerRate').value) || 1000,
                schedule: document.getElementById('trainerSchedule').value.trim(),
                clients: [],
                stats: {
                    sessions: 0,
                    rating: 0,
                    experience: 0
                }
            };
            
            trainers.push(newTrainer);
            closeModal('addTrainerModal');
            renderAll();
            updateTrainerSelectors();
            
            showToast('–¢—Ä–µ–Ω–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
        }
        
        function updateTrainerSelectors() {
            const trainerSelect = document.getElementById('clientTrainer');
            const trainerFilter = document.getElementById('trainerFilter');
            
            if (trainerSelect) {
                trainerSelect.innerHTML = '<option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>' + 
                    trainers.map(trainer => `<option value="${trainer.id}">${trainer.name} (${getSpecialtyName(trainer.specialty)})</option>`).join('');
            }
            
            if (trainerFilter) {
                trainerFilter.innerHTML = '<option value="all">–í—Å–µ —Ç—Ä–µ–Ω–µ—Ä—ã</option>' + 
                    trainers.map(trainer => `<option value="${trainer.id}">${trainer.name}</option>`).join('');
            }
        }
        
        // ===================== –ê–í–¢–û–°–û–û–ë–©–ï–ù–ò–Ø =====================
        function scheduleAutoMessage() {
            const type = document.getElementById('autoMessageType').value;
            const scheduleTime = document.getElementById('messageSchedule').value;
            
            if (!scheduleTime) {
                showToast('–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏', 'error');
                return;
            }
            
            const message = {
                id: Date.now(),
                type: type,
                scheduledTime: scheduleTime,
                status: 'scheduled'
            };
            
            autoMessages.push(message);
            showToast(`–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ ${new Date(scheduleTime).toLocaleString('ru-RU')}`, 'success');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
            setTimeout(() => {
                sendAutoMessage(type);
            }, 1000);
        }
        
        function sendAutoMessage(type) {
            let count = 0;
            let message = '';
            
            switch(type) {
                case 'session_reminder':
                    count = sendSessionReminders();
                    message = `–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–Ω—è—Ç–∏—è—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã ${count} –∫–ª–∏–µ–Ω—Ç–∞–º`;
                    break;
                    
                case 'subscription_expiry':
                    count = checkExpiringSubscriptions();
                    message = `–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã ${count} –∫–ª–∏–µ–Ω—Ç–∞–º`;
                    break;
                    
                case 'new_client':
                    // –ò—â–µ–º –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–±–µ–∑ –∑–∞–Ω—è—Ç–∏–π)
                    const newClients = clients.filter(client => 
                        !trainingSessions.some(session => session.clientId === client.id)
                    );
                    newClients.forEach(client => sendWelcomeMessage(client));
                    count = newClients.length;
                    message = `–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã ${count} –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º`;
                    break;
            }
            
            showToast(message, 'success');
        }
        
        function sendSessionReminders() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowSessions = trainingSessions.filter(session => 
                session.date === tomorrowStr && 
                session.status === 'scheduled'
            );
            
            let sentCount = 0;
            
            tomorrowSessions.forEach(session => {
                const client = clients.find(c => c.id === session.clientId);
                const trainer = trainers.find(t => t.id === session.trainerId);
                
                if (client && trainer && messageTemplates.sessionReminder?.enabled) {
                    const message = messageTemplates.sessionReminder.text
                        .replace('{client_name}', client.name.split(' ')[0])
                        .replace('{trainer_name}', trainer.name)
                        .replace('{session_time}', session.time)
                        .replace('{session_date}', formatDate(session.date))
                        .replace('{location}', session.location);
                    
                    // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                    console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É ${client.name}:`, message);
                    sentCount++;
                }
            });
            
            return sentCount;
        }
        
        function checkExpiringSubscriptions() {
            const now = new Date();
            const weekFromNow = new Date(now);
            weekFromNow.setDate(weekFromNow.getDate() + 7);
            
            const expiringSubs = subscriptions.filter(sub => {
                const endDate = new Date(sub.endDate);
                return endDate > now && endDate <= weekFromNow && sub.status === 'active';
            });
            
            expiringSubs.forEach(sub => {
                const client = clients.find(c => c.id === sub.clientId);
                if (client && messageTemplates.subscriptionExpiry?.enabled) {
                    const message = messageTemplates.subscriptionExpiry.text
                        .replace('{client_name}', client.name.split(' ')[0])
                        .replace('{subscription_type}', sub.type)
                        .replace('{expiry_date}', formatDate(sub.endDate))
                        .replace('{remaining_sessions}', sub.remaining)
                        .replace('{renew_link}', `https://fit-club.ru/renew/${sub.id}`);
                    
                    // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                    console.log(`–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ –∫–ª–∏–µ–Ω—Ç—É ${client.name}:`, message);
                    
                    // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ "–∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–π—Å—è"
                    sub.status = 'expiring';
                }
            });
            
            renderSubscriptions();
            updateStats();
            
            return expiringSubs.length;
        }
        
        function sendWelcomeMessage(client, subscription) {
            if (!messageTemplates.welcome?.enabled) return;
            
            const trainer = client.trainerId ? trainers.find(t => t.id === client.trainerId) : null;
            const firstSession = trainingSessions
                .filter(s => s.clientId === client.id)
                .sort((a, b) => new Date(a.date) - new Date(b.date))[0];
            
            let message = messageTemplates.welcome.text
                .replace('{client_name}', client.name.split(' ')[0])
                .replace('{trainer_name}', trainer?.name || '–±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω')
                .replace('{first_session}', firstSession ? 
                    `${formatDate(firstSession.date)} –≤ ${firstSession.time}` : '–±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–æ')
                .replace('{club_address}', '—É–ª. –§–∏—Ç–Ω–µ—Å–Ω–∞—è, 123, 3 —ç—Ç–∞–∂')
                .replace('{contacts}', '+7 (999) 888-77-66, @fitclub_support');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            console.log(`–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è ${client.name}:`, message);
            
            showToast(`–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É ${client.name}`, 'success');
        }
        
        // ===================== –ö–ê–õ–ï–ù–î–ê–†–¨ –ò –†–ê–°–ü–ò–°–ê–ù–ò–ï =====================
        function updateCalendar() {
            const monthNames = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
                "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
            
            document.getElementById('currentMonth').textContent = 
                `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            document.getElementById('currentDate').textContent = 
                new Date().getDate();
            document.getElementById('currentDay').textContent = 
                new Date().toLocaleDateString('ru-RU', { weekday: 'long' });
            
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            
            let calendarHTML = '';
            
            // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –º–µ—Å—è—Ü–∞
            for (let i = 0; i < firstDay.getDay(); i++) {
                calendarHTML += '<div class="calendar-date"></div>';
            }
            
            // –î–Ω–∏ –º–µ—Å—è—Ü–∞
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dateStr = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const hasSessions = trainingSessions.some(session => session.date === dateStr);
                const isToday = new Date().toISOString().split('T')[0] === dateStr;
                
                calendarHTML += `
                    <div class="calendar-date ${hasSessions ? 'has-sessions' : ''} ${isToday ? 'today' : ''}" 
                         onclick="showDaySessions('${dateStr}')">
                        ${day}
                        ${hasSessions ? '<div class="session-dot"></div>' : ''}
                    </div>
                `;
            }
            
            document.getElementById('calendarDays').innerHTML = calendarHTML;
        }
        
        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateCalendar();
        }
        
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateCalendar();
        }
        
        function updateTodaySessions() {
            const today = new Date().toISOString().split('T')[0];
            const todaySessions = trainingSessions.filter(session => session.date === today);
            const container = document.getElementById('todaySessions');
            
            if (todaySessions.length === 0) {
                container.innerHTML = '<div style="color: var(--gray); font-size: 14px;">–°–µ–≥–æ–¥–Ω—è –∑–∞–Ω—è—Ç–∏–π –Ω–µ—Ç</div>';
                return;
            }
            
            container.innerHTML = todaySessions.map(session => {
                const client = clients.find(c => c.id === session.clientId);
                const trainer = trainers.find(t => t.id === session.trainerId);
                
                return `
                    <div style="background: white; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid var(--primary);">
                        <div style="font-weight: 600; margin-bottom: 5px;">${session.time} - ${client?.name || '–ö–ª–∏–µ–Ω—Ç'}</div>
                        <div style="font-size: 12px; color: var(--gray);">
                            üèãÔ∏è ${trainer?.name || '–¢—Ä–µ–Ω–µ—Ä'} ‚Ä¢ ${session.duration} –º–∏–Ω ‚Ä¢ ${session.location}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ===================== –£–¢–ò–õ–ò–¢–´ =====================
        function updateStats() {
            document.getElementById('totalClients').textContent = clients.length;
            document.getElementById('totalTrainers').textContent = trainers.length;
            document.getElementById('clientsBadge').textContent = clients.length;
            document.getElementById('trainersBadge').textContent = trainers.length;
            
            const today = new Date().toISOString().split('T')[0];
            const todaySessionsCount = trainingSessions.filter(s => s.date === today).length;
            document.getElementById('activeSessions').textContent = todaySessionsCount;
            document.getElementById('scheduleBadge').textContent = todaySessionsCount;
            
            const activeSubs = subscriptions.filter(s => s.status === 'active').length;
            const expiringSoon = subscriptions.filter(s => s.status === 'expiring').length;
            const expiredSubs = subscriptions.filter(s => {
                const endDate = new Date(s.endDate);
                return endDate < new Date() && s.status !== 'expired';
            }).length;
            const totalRevenue = subscriptions.reduce((sum, sub) => sum + sub.price, 0);
            
            document.getElementById('subscriptions').textContent = subscriptions.length;
            document.getElementById('subscriptionsBadge').textContent = expiringSoon;
            document.getElementById('activeSubs').textContent = activeSubs;
            document.getElementById('expiringSoon').textContent = expiringSoon;
            document.getElementById('expiredSubs').textContent = expiredSubs;
            document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
        }
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
            const tabElement = document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`);
            if (tabElement) {
                tabElement.classList.add('active');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
            if (tabName === 'schedule') {
                updateTodaySessions();
            }
        }
        
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            toast.innerHTML = `
                <div style="font-size: 20px;">${icons[type] || icons.info}</div>
                <div style="flex: 1;">
                    <div style="font-weight: 600;">${type.toUpperCase()}</div>
                    <div style="font-size: 14px;">${message}</div>
                </div>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; font-size: 20px; cursor: pointer; color: var(--gray);">√ó</button>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function insertVariable(variable) {
            const activeTab = document.querySelector('.tab-content.active').id;
            let textarea;
            
            switch(activeTab) {
                case 'automessages-tab':
                    textarea = document.querySelector('.message-template-card:first-child textarea');
                    break;
            }
            
            if (textarea) {
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                textarea.value = textarea.value.substring(0, start) + variable + textarea.value.substring(end);
                textarea.focus();
                textarea.setSelectionRange(start + variable.length, start + variable.length);
            }
        }
        
        function getSpecialtyName(specialty) {
            const specialties = {
                fitness: "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä",
                yoga: "–ô–æ–≥–∞",
                crossfit: "–ö—Ä–æ—Å—Å—Ñ–∏—Ç",
                pilates: "–ü–∏–ª–∞—Ç–µ—Å",
                rehabilitation: "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è",
                nutrition: "–ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥"
            };
            
            return specialties[specialty] || specialty;
        }
        
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }
        
        function groupByStatus(subscriptions) {
            const now = new Date();
            const weekFromNow = new Date(now);
            weekFromNow.setDate(weekFromNow.getDate() + 7);
            
            return subscriptions.reduce((groups, sub) => {
                const endDate = new Date(sub.endDate);
                let status = sub.status;
                
                if (endDate > now && endDate <= weekFromNow && sub.status === 'active') {
                    status = 'expiring';
                } else if (endDate < now && sub.status !== 'expired') {
                    status = 'expired';
                }
                
                if (!groups[status]) {
                    groups[status] = [];
                }
                groups[status].push({...sub, status: status});
                
                return groups;
            }, {});
        }
        
        // ===================== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====================
        function sendTestMessage() {
            const type = document.getElementById('autoMessageType').value;
            showToast(`–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–∏–ø–∞ "${type}" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ`, 'success');
        }
        
        function filterClients() {
            const searchTerm = document.getElementById('clientSearch').value.toLowerCase();
            const filteredClients = clients.filter(client => 
                client.name.toLowerCase().includes(searchTerm) ||
                client.phone.includes(searchTerm) ||
                (client.email && client.email.toLowerCase().includes(searchTerm))
            );
            
            const container = document.getElementById('clientsContainer');
            
            if (filteredClients.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üîç</div>
                        <div>–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                    </div>`;
                return;
            }
            
            // –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞
            container.innerHTML = filteredClients.map(client => {
                const trainer = trainers.find(t => t.id === client.trainerId);
                return `
                    <div class="client-card">
                        <div class="client-header">
                            <div class="client-avatar">${client.name.charAt(0)}</div>
                            <div class="client-info">
                                <div class="client-name">${client.name}</div>
                                <div class="client-phone">${client.phone}</div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: var(--gray);">
                            –¢—Ä–µ–Ω–µ—Ä: ${trainer ? trainer.name : '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω'}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function exportClients() {
            const exportData = {
                export_date: new Date().toISOString(),
                total_clients: clients.length,
                clients: clients.map(client => ({
                    id: client.id,
                    name: client.name,
                    phone: client.phone,
                    email: client.email,
                    telegram: client.telegram,
                    trainer_id: client.trainerId,
                    birthday: client.birthday,
                    notes: client.notes
                }))
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `clients_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('–ö–ª–∏–µ–Ω—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON', 'success');
        }
        
        function assignClientsToTrainer() {
            showToast('–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–Ω–µ—Ä–∞ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤', 'info');
        }
        
        function showAddSubscriptionModal() {
            showToast('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞', 'info');
        }
        
        function checkAllSubscriptions() {
            const count = checkExpiringSubscriptions();
            showToast(`–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ ${count} –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤`, 'success');
        }
        
        function notifyTrainer(trainerId) {
            const trainer = trainers.find(t => t.id === trainerId);
            if (trainer) {
                showToast(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç—Ä–µ–Ω–µ—Ä—É ${trainer.name}`, 'success');
            }
        }
        
        function showTrainerSchedule(trainerId) {
            const trainer = trainers.find(t => t.id === trainerId);
            if (trainer) {
                alert(`–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞ ${trainer.name}:\n\n${trainer.schedule}`);
            }
        }
        
        function editClient(clientId) {
            showToast('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞', 'info');
        }
        
        function scheduleSession(clientId) {
            showToast('–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è', 'info');
        }
        
        function sendMessageToClient(clientId) {
            const client = clients.find(c => c.id === clientId);
            if (client) {
                showToast(`–°–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É ${client.name}`, 'info');
            }
        }
        
        function showClientDetails(clientId) {
            const client = clients.find(c => c.id === clientId);
            if (client) {
                const trainer = trainers.find(t => t.id === client.trainerId);
                const subscription = subscriptions.find(s => s.clientId === clientId);
                
                const info = `
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ:

üë§ –ò–º—è: ${client.name}
üì± –¢–µ–ª–µ—Ñ–æ–Ω: ${client.phone}
üìß Email: ${client.email || '–Ω–µ —É–∫–∞–∑–∞–Ω'}
‚úàÔ∏è Telegram: ${client.telegram || '–Ω–µ —É–∫–∞–∑–∞–Ω'}
üéÇ –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ${client.birthday ? formatDate(client.birthday) : '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}

üèãÔ∏è –¢—Ä–µ–Ω–µ—Ä: ${trainer ? trainer.name : '–Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω'}

${subscription ? `
üé´ –ê–±–æ–Ω–µ–º–µ–Ω—Ç:
   –¢–∏–ø: ${subscription.type}
   –°—Ç–∞—Ç—É—Å: ${subscription.status === 'active' ? '‚úÖ –ê–∫—Ç–∏–≤–µ–Ω' : '‚ö†Ô∏è –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è'}
   –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π: ${subscription.remaining}
   –û–∫–æ–Ω—á–∞–Ω–∏–µ: ${formatDate(subscription.endDate)}
` : 'üé´ –ê–±–æ–Ω–µ–º–µ–Ω—Ç: –Ω–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω'}

üìù –ó–∞–º–µ—Ç–∫–∏: ${client.notes || '–Ω–µ—Ç'}
                `;
                
                alert(info);
            }
        }
        
        function extendSubscription(subscriptionId) {
            const subscription = subscriptions.find(s => s.id === subscriptionId);
            if (subscription) {
                const newEndDate = new Date(subscription.endDate);
                newEndDate.setMonth(newEndDate.getMonth() + 1);
                subscription.endDate = newEndDate.toISOString().split('T')[0];
                subscription.status = 'active';
                
                renderSubscriptions();
                updateStats();
                showToast('–ê–±–æ–Ω–µ–º–µ–Ω—Ç –ø—Ä–æ–¥–ª–µ–Ω –Ω–∞ –º–µ—Å—è—Ü', 'success');
            }
        }
        
        function sendReminder(subscriptionId) {
            const subscription = subscriptions.find(s => s.id === subscriptionId);
            const client = clients.find(c => c.id === subscription?.clientId);
            
            if (subscription && client) {
                // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
                console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ –∫–ª–∏–µ–Ω—Ç—É ${client.name}`);
                showToast(`–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É ${client.name}`, 'success');
            }
        }
        
        function showDaySessions(dateStr) {
            const sessions = trainingSessions.filter(session => session.date === dateStr);
            
            if (sessions.length === 0) {
                showToast('–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –∑–∞–Ω—è—Ç–∏–π –Ω–µ—Ç', 'info');
                return;
            }
            
            let message = `–ó–∞–Ω—è—Ç–∏—è –Ω–∞ ${formatDate(dateStr)}:\n\n`;
            
            sessions.forEach(session => {
                const client = clients.find(c => c.id === session.clientId);
                const trainer = trainers.find(t => t.id === session.trainerId);
                message += `${session.time} - ${client?.name || '–ö–ª–∏–µ–Ω—Ç'} —Å ${trainer?.name || '–¢—Ä–µ–Ω–µ—Ä–æ–º'}\n`;
            });
            
            alert(message);
        }
        
        function generateReport() {
            const totalRevenue = subscriptions.reduce((sum, sub) => sum + sub.price, 0);
            const activeClients = clients.filter(client => {
                const sub = subscriptions.find(s => s.clientId === client.id);
                return sub && sub.status === 'active';
            }).length;
            
            const report = `
üìä –û—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü

–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
üë• –í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤: ${clients.length}
üèãÔ∏è –í—Å–µ–≥–æ —Ç—Ä–µ–Ω–µ—Ä–æ–≤: ${trainers.length}
üí∞ –í—ã—Ä—É—á–∫–∞: ${totalRevenue.toLocaleString()} —Ä—É–±
üé´ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤: ${subscriptions.filter(s => s.status === 'active').length}
üìÖ –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∑–∞–Ω—è—Ç–∏–π: ${trainingSessions.length}

–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã: ${activeClients}
–ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ: ${clients.length} (–≤—Å–µ)

–¢–æ–ø —Ç—Ä–µ–Ω–µ—Ä—ã –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–Ω—è—Ç–∏–π:
${trainers.map(t => `  ‚Ä¢ ${t.name}: ${t.stats.sessions} –∑–∞–Ω—è—Ç–∏–π`).join('\n')}

–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ: ${subscriptions.filter(s => s.status === 'expiring').length}
            `;
            
            alert(report);
        }
        
        function syncWithTelegram() {
            showToast('–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Telegram...', 'info');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
            setTimeout(() => {
                showToast('–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞', 'success');
            }, 2000);
        }
    </script>
</body>
</html>
